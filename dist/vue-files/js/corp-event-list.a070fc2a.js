(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["corp-event-list"],{"24e9":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapper"},[o("Pri_TopBar"),o("Pri_SideBar"),o("div",{staticClass:"content-wrapper"},[o("section",{staticClass:"content-header"},[o("h1",[t._v("\n        "+t._s(t.$t("pri.corpEventListView.title"))),o("small",[t._v(t._s(t.version))]),o("small",[t._v(t._s(t.$t("pri.corpEventListView.subTitle"))+" ")])]),o("ol",{staticClass:"breadcrumb"},[o("router-link",{attrs:{tag:"li",to:"/dashboard"}},[o("a",{attrs:{href:"javascript:;"}},[o("i",{staticClass:"fa fa-cogs"}),o("span",{domProps:{innerHTML:t._s(t.$t("common.title"))}})])]),o("router-link",{attrs:{tag:"li",to:"/my-corp"}},[o("a",{attrs:{href:"javascript:;"}},[o("i",{staticClass:"fa fa-sitemap"}),o("span",{domProps:{innerHTML:t._s(t.$t("pri.sidebar.myCorp"))}})])]),o("li",{staticClass:"active"},[t._v(t._s(t.$t("pri.corpEventListView.title")))])],1)]),o("section",{staticClass:"content"},[o("div",{staticClass:"box box-primary"},[o("div",{staticClass:"box-header"},[o("ol",{staticClass:"content-header-btns"},[o("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:function(e){return t.showDailog("create")}}},[t._v(t._s(t.$t("btn.new")))])]),o("br")]),o("div",{staticClass:"box-body"},[o("eeTable",{attrs:{columnArr:t.tableData.columns,rowArr:t.table_corpMemberListData,optionArr:t.tableData.options},scopedSlots:t._u([{key:"opAction",fn:function(e){return[t.flag.isAdmin?[o("router-link",{staticClass:"fa fa-edit ee-pointer",attrs:{tag:"span",title:t.$t("common.update"),to:{name:"corp-event-edit",params:{ce_id:e.oneRow.ce_id}}}}),t._v("\n                    | \n                  ")]:t._e(),o("router-link",{staticClass:"fa fa-eye ee-pointer",attrs:{tag:"span",title:t.$t("common.view"),to:{name:"corp-event-detail",params:{ce_id:e.oneRow.ce_id,ce_code:e.oneRow.ce_code}}}}),e.oneRow.ce_status_id==t.$commonConst.corpEventStatus.start?[t._v("\n                      | \n                    "),o("span",{staticClass:"fa fa-user-plus ee-pointer",attrs:{title:t.$t("pri.corpEventListView.msg.joinCorpEvent.title")},on:{click:function(o){return t.joinEvent(e.oneRow)}}})]:t._e()]}}])})],1)])])]),o("Pri_FooterBar"),o("CorpEventFormModal",{attrs:{modal:this.modalCorpEvent,curDataObj:this.curCorpEventDataObj},on:{"modal-saved":t.modalCorpEventSaved}}),o("COM_MsgModal",{ref:"COM_MsgModal",attrs:{modal:this.modalMsgJoinCorpEvent},scopedSlots:t._u([{key:"ee-modal-body",fn:function(){return[t.errorFlag.joinCorpEvent_alreadyExist?t._e():o("div",{class:"ee-textCenter",domProps:{innerHTML:t._s(t.$t("pri.corpEventListView.msg.joinCorpEvent.join_success"))}}),t.errorFlag.joinCorpEvent_alreadyExist?o("div",{class:"ee-textCenter",domProps:{innerHTML:t._s(t.$t("pri.corpEventListView.msg.joinCorpEvent.join_exist"))}}):t._e()]},proxy:!0}])})],1)},r=[],s=o("7374"),i=o("bf26"),n=o("325e"),c=o("bcea"),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{attrs:{idName:t.modal.form.id,titleName:t.modal.form.title,showSaveBtn:"view"!=t.modal.type,className:t.modal.form.class},on:{"save-item":t.saveData},scopedSlots:t._u([{key:"form-items",fn:function(){return[o("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.ce_type_id}},[o("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_ce_type_id"}},[t._v(t._s(t.$t("pri.corpEventFormModal.modal.ce_type_id")))]),o("div",{staticClass:"col-sm-9"},[o("eeSelect",{attrs:{id:"input_ce_type_id",options:t.select_corpEventTypeArr},model:{value:t.curDataObj.ce_type_id,callback:function(e){t.$set(t.curDataObj,"ce_type_id",e)},expression:"curDataObj.ce_type_id"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errorFlag.ce_type_id,expression:"errorFlag.ce_type_id"}],staticClass:"text-red",domProps:{innerHTML:t._s(t.$t("pri.corpEventFormModal.modal.ce_type_id_hint"))}})],1)]),o("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.ce_title}},[o("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_ce_title"}},[t._v(t._s(t.$t("pri.corpEventFormModal.modal.ce_title")))]),o("div",{staticClass:"col-sm-9"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.curDataObj.ce_title,expression:"curDataObj.ce_title"}],staticClass:"form-control",attrs:{type:"text",id:"input_ce_title",placeholder:t.$t("pri.corpEventFormModal.modal.ce_title")},domProps:{value:t.curDataObj.ce_title},on:{input:function(e){e.target.composing||t.$set(t.curDataObj,"ce_title",e.target.value)}}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errorFlag.ce_title,expression:"errorFlag.ce_title"}],staticClass:"text-red",domProps:{innerHTML:t._s(t.$t("pri.corpEventFormModal.modal.ce_title_hint"))}})])]),o("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.ce_eventDate}},[o("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_ce_eventDate"}},[t._v(t._s(t.$t("pri.corpEventFormModal.modal.ce_eventDate")))]),o("div",{staticClass:"col-sm-9"},[o("DatePicker",{attrs:{width:"100%",lang:"en",type:"datetime",format:"YYYY-MM-DD HH:mm:ss",valueType:"format"},model:{value:t.curDataObj.ce_eventDate,callback:function(e){t.$set(t.curDataObj,"ce_eventDate",e)},expression:"curDataObj.ce_eventDate"}}),o("span",{staticClass:"text-green",domProps:{innerHTML:t._s(t.$t("pri.corpEventFormModal.modal.ce_eventDate_hint"))}})],1)]),o("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.ce_desc}},[o("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_ce_desc"}},[t._v(t._s(t.$t("pri.corpEventFormModal.modal.ce_desc")))]),o("div",{staticClass:"col-sm-9"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.curDataObj.ce_desc,expression:"curDataObj.ce_desc"}],staticClass:"form-control",attrs:{id:"input_ce_desc",rows:"6",placeholder:t.$t("pri.corpEventFormModal.modal.ce_desc")},domProps:{value:t.curDataObj.ce_desc},on:{input:function(e){e.target.composing||t.$set(t.curDataObj,"ce_desc",e.target.value)}}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errorFlag.ce_desc,expression:"errorFlag.ce_desc"}],staticClass:"text-red",domProps:{innerHTML:t._s(t.$t("pri.corpEventFormModal.modal.ce_desc_hint"))}})])]),o("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.ce_status_id}},[o("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_ce_status_id"}},[t._v(t._s(t.$t("pri.corpEventFormModal.modal.ce_status_id")))]),o("div",{staticClass:"col-sm-9"},[o("eeSelect",{attrs:{id:"input_ce_status_id",options:t.select_corpEventStatusArr},model:{value:t.curDataObj.ce_status_id,callback:function(e){t.$set(t.curDataObj,"ce_status_id",e)},expression:"curDataObj.ce_status_id"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errorFlag.ce_status_id,expression:"errorFlag.ce_status_id"}],staticClass:"text-red",domProps:{innerHTML:t._s(t.$t("pri.corpEventFormModal.modal.ce_status_id_hint"))}})],1)])]},proxy:!0}])})},d=[],p=o("714b"),m=o("e21e"),u=o("efba"),_={name:"corp-event-form-modal",data:function(){return{errorFlag:{ce_title:!1,ce_desc:!1,ce_status_id:!1}}},props:{curDataObj:{type:[Object],required:!0},modal:{type:[Object],required:!0}},computed:{select_corpEventTypeArr:function(){var t=[];for(var e in this.$commonConst.corpEventType){var o=this.$commonConst.corpEventType[e];t.push({id:o,text:this.$t("corp.eventType.ce_type_"+o)})}return t},select_corpEventStatusArr:function(){var t=[];for(var e in this.$commonConst.corpEventStatus){var o=this.$commonConst.corpEventStatus[e];t.push({id:o,text:this.$t("corp.eventStatus.ce_status_"+o)})}return t}},methods:{onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorReady:function(t){},saveData:function(){var t=this;for(var e in this.errorFlag)this.errorFlag[e]=!1;var o="v1/corporations/"+this.curDataObj.ce_corporation_id+"/corp-events";this.$axios.post(o,this.curDataObj).then(function(e){t.$emit("modal-saved",e.data)}).catch(function(e){for(var o in e.response.data.data)t.errorFlag[o]=!0})}},mixins:[],components:{Modal:p["a"],eeSelect:m["a"],DatePicker:u["a"]},created:function(){},mounted:function(){},destroyed:function(){},beforeMount:function(){}},v=_,f=o("2877"),h=Object(f["a"])(v,l,d,!1,null,null,null),b=h.exports,C=o("c893"),E=o("6a38"),w={name:"CorpEventListView",data:function(){var t=this;return{version:"v1.0",co_id:0,flag:{isAdmin:!1},errorFlag:{joinCorpEvent_alreadyExist:!1},loadedCorpEventList:[],tableData:{columns:[{field:"ce_id",title:function(){return t.$t("pri.corpEventListView.table.title.ce_id")},sortable:!0},{field:"ce_type",title:function(){return t.$t("pri.corpEventListView.table.title.ce_type_id")},sortable:!0},{field:"ce_title",title:function(){return t.$t("pri.corpEventListView.table.title.ce_title")},sortable:!0},{field:"ce_eventDate",title:function(){return t.$t("pri.corpEventListView.table.title.ce_eventDate")},sortable:!0},{field:"ce_status",title:function(){return t.$t("pri.corpEventListView.table.title.ce_status")},sortable:!0},{field:"ce_creationDate",title:function(){return t.$t("pri.corpEventListView.table.title.ce_creationDate")},sortable:!0},{field:"ce_updateDate",title:function(){return t.$t("pri.corpEventListView.table.title.ce_updateDate")},sortable:!0},{type:"slot",field:"opAction",title:function(){return t.$t("common.op")}}],options:{tableClass:"table table-bordered text-center table-hover table-striped",showTableFooter:!0,sortContainerSize:2,tool_allowGlobalSearch:!0,tool_showRefresh:!0,tool_showColumns:!0}},modalCorpEvent:{type:"create",form:{id:"ee-model-co-member-list-create-form",class:"",sizeClass:"",title:""}},curCorpEventDataObj:{i:"",ce_id:"",ce_corporation_id:"",ce_code:"",ce_title:"",ce_desc:"",ce_eventDate:"",ce_status_id:""},modalMsgJoinCorpEvent:{type:"create",form:{id:"ee-model-co-member-list-joinEvent-msg",class:"",sizeClass:"",title:"pri.corpEventListView.msg.joinCorpEvent.title"}}}},computed:{table_corpMemberListData:function(){var t=[];for(var e in this.loadedCorpEventList){var o=this.loadedCorpEventList[e],a=o;a["ce_status"]=this.$t("corp.eventStatus.ce_status_"+o.ce_status_id),a["ce_type"]=this.$t("corp.eventType.ce_type_"+o.ce_type_id),t.push(a)}return t}},watch:{},methods:{wrapData:function(t){var e=t;return e},wrapTableData:function(t){var e=t;return e},loadCorpEventList:function(){var t=this,e="v1/corporations/"+this.co_id+"/corp-events";this.$axios.get(e).then(function(e){t.loadedCorpEventList=e.data}).catch(function(t){})},checkAdminPermission:function(){var t=this,e="v1/corporations/"+this.co_id+"/is-admin";this.$axios.get(e).then(function(e){t.flag.isAdmin=!0}).catch(function(t){})},showDailog:function(t,e){this.modalCorpEvent.type=t,"create"==t?(this.modalCorpEvent.form.title=this.$t("common.create"),this.cleanObj("curCorpEventDataObj"),this.curCorpEventDataObj.ce_corporation_id=this.co_id,this.curCorpEventDataObj.ce_type_id=this.$commonConst.corpEventType.pve,this.curCorpEventDataObj.ce_status_id=this.$commonConst.corpEventStatus.new):(this.modalCorpEvent.form.title=this.$t("common.update"),"view"==t&&(this.modalCorpEvent.form.title=this.$t("common.view")),this.curCorpEventDataObj=e),$("#"+this.modalCorpEvent.form.id).modal()},modalCorpEventSaved:function(t){$("#"+this.modalCorpEvent.form.id).modal("hide"),this.$router.push("/corp-event/"+t.ce_id+"/edit")},joinEvent:function(t){var e=this,o="v1/corp-events/"+t.ce_id+"/corp-members";this.$axios.post(o).then(function(t){e.$refs.COM_MsgModal.showModal()}).catch(function(t){t.response&&40423101==t.response.data.code&&(e.errorFlag.joinCorpEvent_alreadyExist=!0,e.$refs.COM_MsgModal.showModal())})}},mixins:[],components:{Pri_TopBar:s["a"],Pri_SideBar:i["a"],Pri_FooterBar:n["a"],Pri_RightBar:c["a"],eeTable:E["a"],CorpEventFormModal:b,COM_MsgModal:C["a"]},created:function(){this.co_id=this.$route.params.co_id},mounted:function(){this.loadCorpEventList(),this.checkAdminPermission()},destroyed:function(){},beforeMount:function(){document.body.className="hold-transition skin-red sidebar-mini sidebar-collapse"}},g=w,y=Object(f["a"])(g,a,r,!1,null,null,null);e["default"]=y.exports},c893:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{attrs:{idName:t.modal.form.id+t.theId,titleName:t.$t(t.modal.form.title),showFooterSaveBtn:!1,className:t.modal.form.class},scopedSlots:t._u([{key:"ee-modal-body",fn:function(){return[t._t("ee-modal-body")]},proxy:!0}],null,!0)})},r=[],s=o("714b"),i={name:"COM_MsgModal",data:function(){return{theId:0}},props:{modal:{type:[Object],required:!0}},computed:{},methods:{showModal:function(){$("#"+this.modal.form.id+this.theId).modal()},hideModal:function(){$("#"+this.modal.form.id+this.theId).modal("hide")}},mixins:[],components:{Modal:s["a"]},created:function(){this.theId=Math.floor(1e6*Math.random())},mounted:function(){},destroyed:function(){},beforeMount:function(){}},n=i,c=o("2877"),l=Object(c["a"])(n,a,r,!1,null,null,null);e["a"]=l.exports}}]);