(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{a55b:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login-box"},[e("div",{staticClass:"login-logo"},[e("router-link",{attrs:{tag:"a",to:"/"}},[e("b",[t._v("i")]),t._v("Project")])],1),e("div",{staticClass:"login-box-body"},[e("p",{staticClass:"login-box-msg"},[t._v(t._s(t.$t("pub.login.title")))]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.flag.isSignupSuccess,expression:"$store.state.flag.isSignupSuccess"}],staticClass:"alert alert-success alert-dismissible"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-hidden":"true"}},[t._v("×")]),e("span",{domProps:{innerHTML:t._s(t.$t("pub.login.signupSuccess"))}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.flag.isResetPassSuccess,expression:"$store.state.flag.isResetPassSuccess"}],staticClass:"alert alert-success alert-dismissible"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-hidden":"true"}},[t._v("×")]),e("span",{domProps:{innerHTML:t._s(t.$t("pub.login.resetPassSuccess"))}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.flag.isTokenInValid,expression:"$store.state.flag.isTokenInValid"}],staticClass:"alert alert-warning alert-dismissible"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-hidden":"true"}},[t._v("×")]),e("span",{domProps:{innerHTML:t._s(t.$t("pub.login.loginExpired"))}})]),e("form",{attrs:{action:"#",method:"post"}},[e("div",{staticClass:"form-group has-feedback",class:{"has-error":t.account.email.has_error}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.email.v,expression:"account.email.v"}],staticClass:"form-control",attrs:{type:"email",placeholder:t.$t("pub.login.email")},domProps:{value:t.account.email.v},on:{input:function(s){s.target.composing||t.$set(t.account.email,"v",s.target.value)}}}),e("span",{staticClass:"glyphicon glyphicon-envelope form-control-feedback"})]),e("div",{staticClass:"form-group has-feedback",class:{"has-error":t.account.pass.has_error}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.pass.v,expression:"account.pass.v"}],staticClass:"form-control",attrs:{type:"password",placeholder:t.$t("pub.login.pass")},domProps:{value:t.account.pass.v},on:{input:function(s){s.target.composing||t.$set(t.account.pass,"v",s.target.value)}}}),e("span",{staticClass:"glyphicon glyphicon-lock form-control-feedback"})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-8"},[e("div",{staticClass:"checkbox icheck"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.account.remember.v,expression:"account.remember.v"}],staticClass:"eeICheck",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.account.remember.v)?t._i(t.account.remember.v,null)>-1:t.account.remember.v},on:{change:function(s){var e=t.account.remember.v,a=s.target,o=!!a.checked;if(Array.isArray(e)){var c=null,i=t._i(e,c);a.checked?i<0&&t.$set(t.account.remember,"v",e.concat([c])):i>-1&&t.$set(t.account.remember,"v",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.account.remember,"v",o)}}}),t._v(" "+t._s(t.$t("pub.login.rememberMe"))+"\n            ")])])]),e("div",{staticClass:"col-xs-4"},[e("button",{staticClass:"btn btn-primary btn-block btn-flat",attrs:{type:"button"},on:{click:t.doLogin}},[t._v(t._s(t.$t("common.login")))])])])]),t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12"},[e("router-link",{staticClass:"btn btn-block btn-primary btn-flat",staticStyle:{"margin-bottom":"3px"},attrs:{to:"/signup"}},[t._v(t._s(t.$t("common.signup")))])],1),e("div",{staticClass:"col-xs-12"},[e("router-link",{staticClass:"btn btn-block btn-info btn-flat",staticStyle:{"margin-bottom":"3px"},attrs:{to:"/forgot-pass"}},[t._v(t._s(t.$t("common.forgotPass")))])],1),e("div",{staticClass:"col-xs-12"},[e("router-link",{staticClass:"btn btn-block btn-primary btn-flat",staticStyle:{"margin-bottom":"3px"},attrs:{to:"/"}},[t._v(t._s(t.$t("common.backIndexPage")))])],1)])])])},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"social-auth-links text-center"},[e("p",[t._v("- OR -")])])}],c={name:"Login",data:function(){return{account:{email:{v:"",has_error:!1},pass:{v:"",has_error:!1},remember:{v:!1,has_error:!1}}}},computed:{},methods:{cleanCheckResult:function(){for(var t in this.account)this.account[t].has_error=!1},doLogin:function(t){var s=this;this.cleanCheckResult();var e=this,a=!1,o=["email","pass"];for(var c in o)""==e.account[o[c]].v&&(e.account[o[c]].has_error=!0,a=!0);if(a)return!1;this.$axios.get("v1/accounts/login",{params:{type_id:this.$commonConst.signupType.email,type:"spa",client_id:"spa",client_secret:"spa",email:e.$eeTools.encodeUsername(e.account.email.v),pass:e.$eeTools.encodePass(e.account.pass.v)}}).then(function(t){s.$store.commit("setToken",{token:t.data.access_token,expiredAt:t.data.expires_in}),s.$axios.defaults.headers["Authorization"]=t.data.access_token,s.$axios.get("v1/me").then(function(t){t.data.locale=s.$store.state.account.locale,s.$store.commit("setAccountData",t.data),s.account.remember.v&&s.$store.commit("setAccountCookiesConfigElement",{index:"expires",value:60}),s.$store.dispatch("saveCookies"),s.$router.push("/dashboard")}).catch(function(t){})}).catch(function(t){t.response&&(404304==t.response.data.code&&(e.account.email.has_error=!0),404313==t.response.data.code&&(e.account.pass.has_error=!0))})}},components:{},created:function(){},mounted:function(){$(".eeICheck").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}).on("ifChecked ifUnchecked",function(){$(this)[0].dispatchEvent(new Event("change"))})},destroyed:function(){this.$store.state.flag.isSignupSuccess&&this.$store.commit("setFlag",{flagIndex:"isSignupSuccess",value:!1}),this.$store.state.flag.isTokenInValid&&this.$store.commit("setFlag",{flagIndex:"isTokenInValid",value:!1})},beforeMount:function(){document.body.className="hold-transition login-page ee-login-page"}},i=c,n=e("2877"),r=Object(n["a"])(i,a,o,!1,null,null,null);s["default"]=r.exports}}]);