(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["luck-plan-detail~luck-plan-index"],{"3a14":function(t,l,a){},5396:function(t,l,a){"use strict";var n=function(){var t=this,l=t.$createElement,a=t._self._c||l;return a("div",{staticClass:"box"},[t.input_showHeader?a("div",{staticClass:"box-header  with-border"},[t.input_showTitle?a("h3",{staticClass:"box-title"},["zh"==t.$i18n.locale?a("span",[t._v(t._s(t.input_luckPlan.lp_title))]):a("span",[t._v(t._s(t.input_luckPlan.lp_titleEn))]),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess?a("small",[t._v(" "+t._s(t.render_optionSoldCnt))]):a("small",[t._v(" \n        "+t._s(t.input_luckPlan.lp_box_cnt_total-t.input_luckPlan.lp_box_cnt_sold-t.input_luckPlan.lp_box_cnt_redeeming-t.input_luckPlan.lp_box_cnt_finish)),void 0!=this.$route.query.dp?[t._v("+"+t._s(t.input_luckPlan.lp_box_cnt_sold)+"+"+t._s(t.input_luckPlan.lp_box_cnt_redeeming)+"+"+t._s(t.input_luckPlan.lp_box_cnt_finish))]:t._e(),t._v("/"+t._s(t.input_luckPlan.lp_box_cnt_total)+"\n      ")],2)]):t._e(),a("div",{staticClass:"box-tools pull-right"},[a("router-link",{staticClass:"btn btn-box-tool",attrs:{to:{name:"luck-plan-detail",params:{lp_id:t.input_luckPlan.lp_id}}}},[a("i",{staticClass:"fa fa-share-alt text-maroon"})]),t._m(0),t._m(1)],1)]):t._e(),a("div",{staticClass:"box-body"},["zh"==t.$i18n.locale?a("div",{domProps:{innerHTML:t._s(t.input_luckPlan.lp_desc)}}):a("div",{domProps:{innerHTML:t._s(t.input_luckPlan.lp_descEn)}}),a("div",[a("button",{staticClass:"btn btn-xs ee-columnLeft",class:t.$commonConst.luckPlanType[t.input_luckPlan.lp_luckPlanType_id]["bgColor"]},[t._v(t._s(t.$t("luckPlan.luckPlan.type.t_"+t.input_luckPlan.lp_luckPlanType_id)))]),a("button",{staticClass:"btn btn-xs ee-columnLeft",class:t.$commonConst.luckPlanStatus[t.input_luckPlan.lp_status_id]["bgColor"]},[t._v(t._s(t.$t("luckPlan.luckPlan.status.s_"+t.input_luckPlan.lp_status_id)))]),t.input_luckPlan.lp_isDemo?a("button",{staticClass:"btn btn-xs ee-columnLeft",class:t.$commonConst.luckPlanSupportType.lp_isDemo.bgColor},[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_isDemo")))]):t._e(),t.input_luckPlan.lp_isNewbie?a("button",{staticClass:"btn btn-xs ee-columnLeft",class:t.$commonConst.luckPlanSupportType.lp_isNewbie.bgColor},[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_isNewbie")))]):t._e(),t.input_luckPlan.lp_corporation_id>0?a("button",{staticClass:"btn btn-xs ee-columnLeft",class:t.$commonConst.luckPlanSupportType.lp_isCorp.bgColor},[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_isCorp")))]):t._e(),t.input_luckPlan.lp_hasPass?a("button",{staticClass:"btn btn-xs ee-columnLeft",class:t.$commonConst.luckPlanSupportType.lp_hasPass.bgColor},[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_hasPass")))]):t._e(),a("div",{staticClass:"pull-right"},[a("small",[t._v(t._s(t.input_luckPlan.lp_startDate)+" - "+t._s(t.input_luckPlan.lp_endDate))])])])]),a("div",{staticClass:"box-footer"},[a("div",{staticClass:"nav-tabs-custom"},[a("ul",{staticClass:"nav nav-tabs"},t._l(t.cal_tabTitle,function(l,n){return a("li",{staticClass:"ee-pointer",class:t.flag.curPlanDetailTab==n?"active":"",on:{click:function(l){return t.switchTab(n)}}},[a("a",{staticStyle:{"max-width":"320px"}},[a("span",{class:l.icon}),t._v("\n            "+t._s(t.$t("luckPlan.titles."+l.index))+"\n          ")])])}),0)]),"planDetail"==t.flag.curPlanDetailTab?a("div",{staticClass:"clearfix ",staticStyle:{margin:"0px 0px 10px 0px"}},[a("div",{staticClass:"col-md-4 border-right"},[a("dl",[t.input_luckPlan.lp_luckPlanType_id<t.$commonConst.luckPlanTypeIdMapping.guess?[a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_box_cnt_total")))]),a("dd",[t._v(t._s(t.input_luckPlan.lp_box_cnt_total))])]:t._e(),a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_box_cnt_sold")))]),a("dd",[t._v(t._s(t.input_luckPlan.lp_box_cnt_sold+t.input_luckPlan.lp_box_cnt_redeeming+t.input_luckPlan.lp_box_cnt_finish))]),t.input_luckPlan.lp_luckPlanType_id<t.$commonConst.luckPlanTypeIdMapping.guess?[a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_box_price")))]),a("dd",[t._v(t._s(t.eeFormatNumber(t.input_luckPlan.lp_box_price)))])]:t._e(),a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_money_in")))]),a("dd",[t._v(t._s(t.eeFormatNumber(t.input_luckPlan.lp_money_in)))])],2)]),a("div",{staticClass:"col-md-4 border-right"},[a("dl",[a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_rate_award")))]),a("dd",[t._v(t._s(t.eeShowPercent(t.input_luckPlan.lp_rate_award,0))+" %")]),a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_rate_return")))]),a("dd",[t._v(t._s(t.eeShowPercent(t.input_luckPlan.lp_rate_return,0))+" %")]),t.input_luckPlan.lp_luckPlanPool_id>0?[a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_rate_toPool")))]),a("dd",[t._v(t._s(t.eeShowPercent(t.input_luckPlan.lp_rate_toPool,0))+" %")]),a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_luckPlanPool_id")))]),a("dd",[t._v(t._s(t.input_luckPlan.lpLuckPlanPool.lpp_title))])]:t._e()],2)]),a("div",{staticClass:"col-md-4"},[a("dl",[a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_startDate")))]),a("dd",[t._v(t._s(t.input_luckPlan.lp_startDate))]),a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_endDate")))]),a("dd",[t._v(t._s(t.input_luckPlan.lp_endDate))]),a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_openDate")))]),a("dd",[t._v(t._s(t.input_luckPlan.lp_openDate))]),t.input_luckPlan.lp_corporation_id>0?[a("dt",[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_corporation_id")))]),a("dd",[t._v(t._s(t.input_luckPlan.lpCorporation.co_title))])]:t._e()],2)])]):t._e(),"optionList"==t.flag.curPlanDetailTab?a("div",[a("table",{staticClass:"table table-bordered"},[a("tbody",[a("tr",[a("th",{staticStyle:{width:"10px"}},[t._v("#")]),a("th",[t._v(t._s(t.$t("luckPlan.luckPlanOption.titles.lpo_title")))]),a("th",[t._v(t._s(t.$t("luckPlan.luckPlanOption.titles.lpo_price_unit")))]),t.input_luckPlan.lp_luckPlanType_id<t.$commonConst.luckPlanTypeIdMapping.guess?a("th",[t._v(t._s(t.$t("luckPlan.luckPlanOption.titles.lpo_amount")))]):t._e(),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess?a("th",[t._v(t._s(t.$t("luckPlan.luckPlanOption.titles.lpo_cnt_sold_"+t.$commonConst.luckPlanTypeIdMapping.guess)))]):t._e(),a("th",[t._v(t._s(t.$t("luckPlan.luckPlanOption.titles.lpo_winRate")))]),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess&&t.input_luckPlan.lp_status_id>=t.$commonConst.luckPlanStatusIdMapping.open?a("th",[t._v(t._s(t.$t("luckPlan.luckPlanOption.titles.lpo_isWon")))]):t._e(),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess&&t.input_luckPlan.lp_status_id==t.$commonConst.luckPlanStatusIdMapping.buyable?a("th",[t._v(t._s(t.$t("common.op")))]):t._e()]),t._l(t.input_luckPlan.luckPlanOptions,function(l,n){return a("tr",[a("td",[t._v(t._s(n+1)+".")]),a("td",[t._v(t._s(l.lpo_title))]),a("td",[t._v(t._s(t.eeFormatNumber(l.lpo_price_unit)))]),t.input_luckPlan.lp_luckPlanType_id<t.$commonConst.luckPlanTypeIdMapping.guess?a("td",[t._v(t._s(l.lpo_amount))]):t._e(),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess?a("td",[t._v(t._s(t.loadedOptionSoldCntList[l.lpo_id]))]):t._e(),a("td",[a("span",{staticClass:"badge",class:{"bg-green":t.cal_optionWinRate(l)>=50,"bg-blue":t.cal_optionWinRate(l)<50&&t.cal_optionWinRate(l)>=33,"bg-yellow":t.cal_optionWinRate(l)<33&&t.cal_optionWinRate(l)>=15,"bg-red":t.cal_optionWinRate(l)<15}},[t._v(t._s(t.cal_optionWinRate(l))+" %")])]),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess&&t.input_luckPlan.lp_status_id>=t.$commonConst.luckPlanStatusIdMapping.open?a("td",[l.lpo_isWon?a("span",{staticClass:"fa fa-check text-green"}):a("span",{staticClass:"fa fa-close text-gray"})]):t._e(),t.input_luckPlan.lp_luckPlanType_id==t.$commonConst.luckPlanTypeIdMapping.guess&&t.input_luckPlan.lp_status_id==t.$commonConst.luckPlanStatusIdMapping.buyable?a("td",{on:{click:function(a){return t.option_showBuyModal(l)}}},[a("span",{staticClass:"fa fa-shopping-cart ee-pointer"})]):t._e()])})],2)])]):t._e(),"logList"==t.flag.curPlanDetailTab?a("div",[a("eeTable",{attrs:{columnArr:t.logTable_config,rowArr:t.logTable_rowData,optionArr:t.tableData.options},scopedSlots:t._u([{key:"top-left-tool-section",fn:function(){return[a("eeButtonFilter",{attrs:{input_filterObj:t.flag.showTypes_luckPlanOptionLogStatusId,input_activeClassObj:t.eeCalfilterBtnActiveClass(t.$commonConst.luckPlanOptionLogStatus),input_countObj:t.eeArrayCountIndex(t.loadedLuckPlanOptionLogList,"lpol_status_id"),i18nPrefix:"luckPlan.luckPlanOptionLog.status.s_"},on:{"switch-item-show-flag":function(l){var a=arguments.length,n=Array(a);while(a--)n[a]=arguments[a];return t.eeSwitchObjFlag.apply(void 0,[t.flag.showTypes_luckPlanOptionLogStatusId].concat(n))},"switch-showAll-flag":function(l){var a=arguments.length,n=Array(a);while(a--)n[a]=arguments[a];return t.eeSetObjFlag.apply(void 0,[t.flag.showTypes_luckPlanOptionLogStatusId,""].concat(n,[!0]))}}})]},proxy:!0},{key:"opAction",fn:function(l){return[a("span",{staticClass:"fa fa-eye ee-opBtn16 ee-pointer ee-columnLeft",on:{click:function(a){return t.log_viewDetail(l.oneRow,l.oneKey)}}}),a("router-link",{attrs:{to:{name:"luck-plan-log-detail",params:{lpol_id:l.oneRow.lpol_id}}}},[a("i",{staticClass:"fa fa-share-alt text-maroon ee-opBtn16 ee-pointer"})])]}}],null,!1,316714296)})],1):t._e()]),a("LuckPlanOptionLogViewModal",{ref:"LuckPlanOptionLogViewModal",attrs:{modal:this.modalOptionLog,input_i:t.curOptionLogI},on:{"box-buy-success":t.box_buySuccess}}),a("LuckPlanOptionBuyModal",{ref:"LuckPlanOptionBuyModal",attrs:{modal:this.modalOptionBuy,input_luckPlan:t.input_luckPlan},on:{"option-buy-success":t.option_buySuccess}})],1)},o=[function(){var t=this,l=t.$createElement,a=t._self._c||l;return a("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[a("i",{staticClass:"fa fa-minus"})])},function(){var t=this,l=t.$createElement,a=t._self._c||l;return a("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[a("i",{staticClass:"fa fa-times"})])}],e=(a("c5f6"),a("6a38")),i=a("dc35"),s=a("4090"),u=function(){var t=this,l=t.$createElement,a=t._self._c||l;return a("Modal",{attrs:{idName:t.modal.params.id+t.theId,titleName:t.$t(t.modal.params.title),showFooterSaveBtn:!1,className:t.modal.params.class,sizeClassName:t.modal.params.sizeClass},scopedSlots:t._u([{key:"ee-modal-body",fn:function(){return[a("div",{staticClass:"row"},[t.flag.buyStatus==t.$commonConst.luckPlanOptionLogStatusIdMapping.new?a("div",{staticClass:"col-md-12"},[a("h3",[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.sectionTitles.buySection"))+" "),a("small",[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.sectionTitles.buySection_sub")))])]),a("form",{staticClass:"form-horizontal"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_lpol_luckPlanOption_id"+t.theId}},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_luckPlanOption_id")))]),a("div",{staticClass:"col-sm-10"},[a("eeSelect",{attrs:{id:"input_lpol_luckPlanOption_id"+t.theId,options:t.select_optionArr},model:{value:t.loadedLuckPlanOptionLog.lpol_luckPlanOption_id,callback:function(l){t.$set(t.loadedLuckPlanOptionLog,"lpol_luckPlanOption_id",l)},expression:"loadedLuckPlanOptionLog.lpol_luckPlanOption_id"}})],1)]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_lpol_price_unit"+t.theId}},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_price_unit")))]),a("div",{staticClass:"col-sm-10"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"input_lpol_price_unit"+t.theId,disabled:"true"},domProps:{value:t.eeFormatNumber(t.loadedLuckPlanOptionLog.lpol_price_unit)}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_lpol_amount"+t.theId}},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_amount")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.loadedLuckPlanOptionLog.lpol_amount,expression:"loadedLuckPlanOptionLog.lpol_amount"}],staticClass:"form-control",attrs:{type:"text",id:"input_lpol_amount"+t.theId},domProps:{value:t.loadedLuckPlanOptionLog.lpol_amount},on:{input:function(l){l.target.composing||t.$set(t.loadedLuckPlanOptionLog,"lpol_amount",l.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label"},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_price_sum")))]),a("div",{staticClass:"col-sm-10"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"input_lpol_price_sum"+t.theId,disabled:"true"},domProps:{value:t.eeFormatNumber(t.loadedLuckPlanOptionLog.lpol_price_unit*t.loadedLuckPlanOptionLog.lpol_amount)}})])]),a("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.luckPlanOptionLog.lpol_price_unit}},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_a_money"+t.theId}},[t._v(t._s(t.$t("account.titles.a_money")))]),a("div",{staticClass:"col-sm-10"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon text-green ee-pointer",on:{click:function(l){return t.$refs.HowToModal.showModal()}}},[a("i",{staticClass:"fa fa-plus"})]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"input_a_money"+t.theId,disabled:"true"},domProps:{value:t.eeFormatNumber(t.$store.state.account.data.a_money)}}),a("span",{staticClass:"input-group-addon"},[t._v(t._s(t.$t("common.costCurrency")))])])])]),a("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.luckPlanOptionLog.lpol_awardeeId}},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_lpol_awardeeId"+t.theId}},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_awardeeId")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.loadedLuckPlanOptionLog.lpol_awardeeId,expression:"loadedLuckPlanOptionLog.lpol_awardeeId"}],staticClass:"form-control",attrs:{type:"text",id:"input_lpol_awardeeId"+t.theId},domProps:{value:t.loadedLuckPlanOptionLog.lpol_awardeeId},on:{input:function(l){l.target.composing||t.$set(t.loadedLuckPlanOptionLog,"lpol_awardeeId",l.target.value)}}}),a("span",{staticClass:"text-danger",domProps:{innerHTML:t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_awardeeId_hint"))}})])]),a("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.luckPlanOptionLog.lpol_awardeeUsername}},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_lpol_awardeeUsername"+t.theId}},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.titles.lpol_awardeeUsername")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.loadedLuckPlanOptionLog.lpol_awardeeUsername,expression:"loadedLuckPlanOptionLog.lpol_awardeeUsername"}],staticClass:"form-control",attrs:{type:"text",id:"input_lpol_awardeeUsername"+t.theId},domProps:{value:t.loadedLuckPlanOptionLog.lpol_awardeeUsername},on:{input:function(l){l.target.composing||t.$set(t.loadedLuckPlanOptionLog,"lpol_awardeeUsername",l.target.value)}}})])]),t.input_luckPlan.lp_hasPass?a("div",{staticClass:"form-group",class:{"has-error":t.errorFlag.luckPlan.lp_passcode}},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input_lp_passcode"+t.theId}},[t._v(t._s(t.$t("luckPlan.luckPlan.titles.lp_passcode")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.loadedLuckPlan.lp_passcode,expression:"loadedLuckPlan.lp_passcode"}],staticClass:"form-control",attrs:{type:"text",id:"input_lp_passcode"+t.theId},domProps:{value:t.loadedLuckPlan.lp_passcode},on:{input:function(l){l.target.composing||t.$set(t.loadedLuckPlan,"lp_passcode",l.target.value)}}})])]):t._e(),a("div",{staticClass:"pull-right"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(l){return t.option_buy()}}},[t._v(t._s(t.$t("luckPlan.luckPlanOptionLog.btn.buy")))])])])]):t._e(),t.flag.buyStatus==t.$commonConst.luckPlanOptionLogStatusIdMapping.bought?a("div",{staticClass:"col-md-12 border-top"},[a("div",{staticClass:"callout callout-success",domProps:{innerHTML:t._s(t.$t("luckPlan.luckPlanOptionLog.msg.boxBuySuccess"))}})]):t._e(),a("HowToModal",{ref:"HowToModal",attrs:{input_code:"help_howToRecharge"}})],1)]},proxy:!0}])})},c=[],p=a("714b"),d=a("e21e"),r=a("b834"),P={name:"LuckPlanOptionBuyModal",data:function(){return{theId:0,loadedLuckPlanOptionLog:{lpol_luckPlanOption_id:null,lpol_price_unit:0,lpol_amount:1,lpol_awardeeId:"",lpol_awardeeUsername:""},loadedLuckPlan:{lp_passcode:""},flag:{buyStatus:this.$commonConst.luckPlanOptionLogStatusIdMapping.new},errorFlag:{luckPlan:{lp_passcode:!1},luckPlanOptionLog:{lpol_price_unit:!1,lpol_awardeeId:!1,lpol_awardeeUsername:!1}}}},props:{modal:{type:[Object],required:!0},input_luckPlan:{}},computed:{select_optionArr:function(){for(var t=[],l=0;l<this.input_luckPlan.luckPlanOptions.length;l++){var a=this.input_luckPlan.luckPlanOptions[l],n={id:a.lpo_id,text:a.lpo_title,price:a.lpo_price_unit};"zh"!=this.$i18n.locale&&(n.text=a.lpo_titleEn),t.push(n)}return t},optionPriceArr:function(){for(var t={},l=0;l<this.input_luckPlan.luckPlanOptions.length;l++){var a=this.input_luckPlan.luckPlanOptions[l];t[a.lpo_id]={price:a.lpo_price_unit}}return t}},watch:{"loadedLuckPlanOptionLog.lpol_luckPlanOption_id":function(t,l){this.loadedLuckPlanOptionLog.lpol_price_unit=0,void 0!=this.optionPriceArr[t]&&(this.loadedLuckPlanOptionLog.lpol_price_unit=this.optionPriceArr[t]["price"])}},methods:{showModal:function(){this.flag.buyStatus=this.$commonConst.luckPlanOptionLogStatusIdMapping.new,this.loadedLuckPlan.lp_passcode="",this.loadedLuckPlanOptionLog.lpol_amount=1,this.loadedLuckPlanOptionLog.lpol_awardeeId=this.$store.state.account.data.a_game_id,this.loadedLuckPlanOptionLog.lpol_awardeeUsername=this.$store.state.account.data.a_game_role,$("#"+this.modal.params.id+this.theId).modal()},hideModal:function(){$("#"+this.modal.params.id+this.theId).modal("hide")},loadData:function(){},setSelectedOptionId:function(t){this.loadedLuckPlanOptionLog.lpol_luckPlanOption_id=t},option_buy:function(){var t=this;if(this.eeSetObjFlag(this.errorFlag.luckPlan,"",!1,!0),this.eeSetObjFlag(this.errorFlag.luckPlanOptionLog,"",!1,!0),_.isEmpty(this.loadedLuckPlanOptionLog.lpol_awardeeId)||11!=this.loadedLuckPlanOptionLog.lpol_awardeeId.length||_.isEmpty(this.loadedLuckPlanOptionLog.lpol_awardeeUsername))return(_.isEmpty(this.loadedLuckPlanOptionLog.lpol_awardeeId)||11!=this.loadedLuckPlanOptionLog.lpol_awardeeId.length)&&(this.errorFlag.luckPlanOptionLog.lpol_awardeeId=!0),_.isEmpty(this.loadedLuckPlanOptionLog.lpol_awardeeUsername)&&(this.errorFlag.luckPlanOptionLog.lpol_awardeeUsername=!0),!1;var l={lpol_amount:this.loadedLuckPlanOptionLog.lpol_amount,lpol_awardeeId:this.loadedLuckPlanOptionLog.lpol_awardeeId,lpol_awardeeUsername:this.loadedLuckPlanOptionLog.lpol_awardeeUsername,lp_passcode:this.loadedLuckPlan.lp_passcode},a="v1/luck-plan-options/"+this.loadedLuckPlanOptionLog.lpol_luckPlanOption_id+"/luck-plan-option-logs";this.$axios.post(a,l).then(function(l){t.flag.buyStatus=t.$commonConst.luckPlanOptionLogStatusIdMapping.bought,t.$store.commit("setAccountDataElement",{index:"a_money",value:t.$store.state.account.data.a_money-t.loadedLuckPlanOptionLog.lpol_price_unit*t.loadedLuckPlanOptionLog.lpol_amount}),t.$emit("option-buy-success",l.data)}).catch(function(l){"40460003"==l.response.data.code&&(t.errorFlag.luckPlan.lp_passcode=!0),"40460511"==l.response.data.code&&(t.errorFlag.luckPlanOptionLog.lpol_price_unit=!0)})}},mixins:[],components:{Modal:p["a"],HowToModal:r["a"],eeSelect:d["a"]},created:function(){this.theId=Math.floor(1e6*Math.random())+"-"+Math.floor(1e6*Math.random())},mounted:function(){},destroyed:function(){},beforeMount:function(){}},k=P,m=(a("c3b0"),a("2877")),g=Object(m["a"])(k,u,c,!1,null,"69c4210b",null),h=g.exports,f={name:"eeLuckPlanDisplay",data:function(){return{theId:0,flag:{curPlanDetailTab:"planDetail",showTypes_luckPlanOptionLogStatusId:{}},loadedLuckPlanOptionLogList:[],loadedOptionSoldCntList:{},tableData:{options:{tableClass:"table table-bordered text-center table-hover table-striped",enablePagination:!0,pageSize:10,sortContainerSize:2,tool_allowGlobalSearch:!0,tool_showRefresh:!0,tool_showColumns:!0}},curOptionLogI:0,modalOptionLog:{type:"view",params:{id:"ee-model-luck-plan-index-optionLog-view",class:"",sizeClass:"eeModal60",title:"luckPlan.luckPlanOptionLog.title"}},modalOptionBuy:{type:"buy",params:{id:"ee-model-luck-plan-index-optionBuy",class:"",sizeClass:"eeModal60",title:"luckPlan.luckPlanOptionLog.title"}}}},computed:{cal_tabTitle:function(){var t={planDetail:{icon:"fa fa-eye",index:"planDetail"},optionList:{icon:"fa fa-balance-scale",index:"optionList"},logList:{icon:"fa fa-diamond",index:"logList"}};return this.input_luckPlan.lp_luckPlanType_id==this.$commonConst.luckPlanTypeIdMapping.guess&&(t.optionList.index+="_"+this.input_luckPlan.lp_luckPlanType_id,t.logList.index+="_"+this.input_luckPlan.lp_luckPlanType_id),t},logTable_config:function(){var t=this,l=[{field:"lpol_id",title:function(){return t.$t("luckPlan.luckPlanOptionLog.titles.lpol_id")},sortable:!0},{field:"lpol_price_unit",title:function(){return t.$t("luckPlan.luckPlanOptionLog.titles.lpol_price_unit")},sortable:!0,callback:function(t,l,a){return a.eeFormatNumber(t)}}];return this.input_luckPlan.lp_luckPlanType_id==this.$commonConst.luckPlanTypeIdMapping.guess&&l.push({field:"lpol_amount",title:function(){return t.$t("luckPlan.luckPlanOptionLog.titles.lpol_amount")},sortable:!0,callback:function(t,l,a){return a.eeFormatNumber(t)}},{field:"lpol_title",title:function(){return t.$t("luckPlan.luckPlanOptionLog.titles.lpol_title")},sortable:!0}),l.push({field:"lpol_status",title:function(){return t.$t("luckPlan.luckPlanOptionLog.titles.lpol_status_id")},sortable:!0,callback:function(t,l,a){var n="";return void 0!=a.$commonConst.luckPlanOptionLogStatus[l.lpol_status_id]&&(n=a.$commonConst.luckPlanOptionLogStatus[l.lpol_status_id]["bgColor"]),'<span class="label ee-font11 '+n+'" >'+t+"</span>"}},{type:"slot",field:"opAction",title:function(){return t.$t("common.op")}}),l},logTable_rowData:function(){for(var t=[],l=0;l<this.loadedLuckPlanOptionLogList.length;l++){var a=this.loadedLuckPlanOptionLogList[l];if(this.flag.showTypes_luckPlanOptionLogStatusId[a.lpol_status_id]){var n=a;n.i=l,n.lpol_status=this.$t("luckPlan.luckPlanOptionLog.status.s_"+a.lpol_status_id),t.push(n)}}return t},render_optionSoldCnt:function(){var t="";for(var l in this.loadedOptionSoldCntList){var a=this.loadedOptionSoldCntList[l];""!=t&&(t+="/"),t+=a}return t}},props:{input_luckPlan:{required:!0},input_showTitle:{default:!0},input_showHeader:{default:!0}},watch:{loadedLuckPlanOptionLogList:function(t){this.log_setOptionSoldCnt()},input_luckPlan:function(t){this.input_luckPlan.lp_luckPlanType_id==this.$commonConst.luckPlanTypeIdMapping.guess&&this.loadLogList()}},methods:{switchTab:function(t){this.flag.curPlanDetailTab=t,"logList"==t&&0==this.loadedLuckPlanOptionLogList.length&&this.loadLogList()},init_luckPlanOptionLogStatusIdShow:function(){var t={};for(var l in this.$commonConst.luckPlanOptionLogStatusIdMapping)"fail"!=l&&"buying"!=l&&("new"==l&&this.input_luckPlan.lp_luckPlanType_id==this.$commonConst.luckPlanTypeIdMapping.guess||(t[this.$commonConst.luckPlanOptionLogStatusIdMapping[l]]=!0));this.$set(this.flag,"showTypes_luckPlanOptionLogStatusId",t)},loadLogList:function(){var t=this,l="v1/luck-plans/"+this.input_luckPlan.lp_id+"/luck-plan-option-logs";this.$axios.get(l,{params:{}}).then(function(l){t.loadedLuckPlanOptionLogList=l.data}).catch(function(t){})},log_setOptionSoldCnt:function(){this.loadedOptionSoldCntList={};for(var t=0;t<this.input_luckPlan.luckPlanOptions.length;t++){var l=this.input_luckPlan.luckPlanOptions[t];this.loadedOptionSoldCntList[l.lpo_id]=0}for(t=0;t<this.loadedLuckPlanOptionLogList.length;t++){var a=this.loadedLuckPlanOptionLogList[t];void 0!=this.loadedOptionSoldCntList[a.lpol_luckPlanOption_id]&&(this.loadedOptionSoldCntList[a.lpol_luckPlanOption_id]+=Number(a.lpol_amount))}},log_viewDetail:function(t){this.curOptionLogI=t.i,this.$refs.LuckPlanOptionLogViewModal.loadData(t.lpol_id),this.$refs.LuckPlanOptionLogViewModal.showModal()},cal_optionWinRate:function(t){var l=0;return l=this.input_luckPlan.lp_luckPlanType_id==this.$commonConst.luckPlanTypeIdMapping.guess?1/this.input_luckPlan.luckPlanOptions.length:t.lpo_amount/this.input_luckPlan.lp_box_cnt_total,this.eeShowPercent(l)},box_buySuccess:function(t){this.loadedLuckPlanOptionLogList[t]["lpol_status_id"]=this.$commonConst.luckPlanOptionLogStatusIdMapping.bought,this.$emit("box-buy-success",this.input_luckPlan.i)},option_showBuyModal:function(t){this.$refs.LuckPlanOptionBuyModal.setSelectedOptionId(t.lpo_id),this.$refs.LuckPlanOptionBuyModal.showModal()},option_buySuccess:function(t){this.loadedLuckPlanOptionLogList.push(t),this.$emit("option-buy-success",this.input_luckPlan.i)}},mixins:[],components:{eeTable:e["a"],eeButtonFilter:i["a"],LuckPlanOptionLogViewModal:s["a"],LuckPlanOptionBuyModal:h},created:function(){this.theId=Math.floor(1e6*Math.random())},mounted:function(){this.init_luckPlanOptionLogStatusIdShow(),this.input_luckPlan.lp_luckPlanType_id==this.$commonConst.luckPlanTypeIdMapping.guess&&this.loadLogList()},beforeDestroy:function(){}},L=f,b=(a("a4f4"),Object(m["a"])(L,n,o,!1,null,"8a96f950",null));l["a"]=b.exports},a4f4:function(t,l,a){"use strict";var n=a("3a14"),o=a.n(n);o.a},c3b0:function(t,l,a){"use strict";var n=a("d4e7"),o=a.n(n);o.a},d4e7:function(t,l,a){},e21e:function(t,l,a){"use strict";var n=function(){var t=this,l=t.$createElement,a=t._self._c||l;return a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.inValue,expression:"inValue"}],staticClass:"form-control",attrs:{id:t.id+"-"+t.theId,name:t.name,placeholder:t.placeholder,disabled:t.disabled,multiple:t.mu},on:{change:[function(l){var a=Array.prototype.filter.call(l.target.options,function(t){return t.selected}).map(function(t){var l="_value"in t?t._value:t.value;return l});t.inValue=l.target.multiple?a:a[0]},t.optionChanged]}},t._l(t.select_OptionArr,function(l){return a("option",{domProps:{value:l.id}},[t._v(t._s(l.text))])}),0)])},o=[],e={name:"eeSelect",data:function(){return{theId:0,inValue:null}},computed:{select_OptionArr:function(){var t=[];return this.allowClear&&t.push({id:0,text:this.$t("common.all")}),_.concat(t,this.options)}},model:{event:"change",prop:"value"},props:{id:{type:String,default:""},name:{type:String,default:""},placeholder:{type:String,default:""},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},mu:{type:Boolean,default:!1},settings:{type:Object,default:function(){}},value:null},watch:{value:function(t){this.inValue=t}},methods:{optionChanged:function(){this.$emit("change",this.inValue)}},mixins:[],created:function(){this.theId=Math.floor(1e6*Math.random()),this.inValue=this.value},mounted:function(){},beforeDestroy:function(){}},i=e,s=a("2877"),u=Object(s["a"])(i,n,o,!1,null,null,null);l["a"]=u.exports}}]);