(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ship"],{"50a4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("Pri_TopBar"),i("Pri_SideBar"),i("div",{staticClass:"content-wrapper"},[i("section",{staticClass:"content-header"},[i("h1",[t._v("\n        "+t._s(t.$t("pri.shipView.title"))),i("small",[t._v(t._s(t.version))]),i("small",[t._v(t._s(t.$t("pri.shipView.subTitle"))+" "),i("span",{staticClass:"btn btn-xs bg-olive "},[t._v(t._s(t.$t("datasource.d202008")))])])]),i("ol",{staticClass:"breadcrumb"},[i("router-link",{attrs:{tag:"li",to:"/dashboard"}},[i("a",{attrs:{href:"javascript:;"}},[i("i",{staticClass:"fa fa-cogs"}),i("span",{domProps:{innerHTML:t._s(t.$t("common.title"))}})])]),i("li",{staticClass:"active"},[t._v(t._s(t.$t("pri.shipView.title")))])],1)]),i("section",{staticClass:"content"},[i("div",{staticClass:"box"},[i("div",{staticClass:"box-header"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.usageTitle")))]),t._m(0)]),i("div",{staticClass:"box-body",domProps:{innerHTML:t._s(t.$t("pri.shipView.usageBody"))}})]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"nav-tabs-custom"},[i("ul",{staticClass:"nav nav-tabs"},t._l(t.$commonConst.blueprintType,function(e,s){return i("li",{class:t.selectedItemTypeId==e?"active":"",on:{click:function(i){return t.switchItemType(e)}}},[i("a",{staticStyle:{"max-width":"320px"},attrs:{href:"javascript:;"}},[i("span",{staticClass:"fa ",class:{"fa-paper-plane-o":"ship"==s,"fa-shield":"equipment"==s,"fa-location-arrow":"drone"==s,"fa-bank":"building"==s}}),t._v("\n                  "+t._s(t.$t("blueprintType."+s))+"\n                ")])])}),0)])])]),i("div",{staticClass:"box"},[i("div",{staticClass:"box-header"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.config.title")))]),t._m(1)]),i("div",{staticClass:"box-body"},[i("form",{staticClass:"form-horizontal row"},[i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group "},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_selectedItemId"}},[t._v(t._s(t.$t("pri.shipView.config.selectItem"+t.selectedItemTypeId)))]),i("div",{staticClass:"col-sm-8"},[i("Select2",{attrs:{id:"input_selectedItemId",options:t.select2_itemList},on:{change:t.loadShipBlueprintDetail},model:{value:t.selectedItemId,callback:function(e){t.selectedItemId=e},expression:"selectedItemId"}})],1)])]),i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group "},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_shipView_category"}},[t._v(t._s(t.$t("pri.shipView.config.itemCategoryFilter")))]),i("div",{staticClass:"col-sm-8"},[i("eeSelect",{attrs:{id:"input_shipView_category",allowClear:!0,options:t.select2_itemCategoryFilterArr},model:{value:t.selectedItemCategoryFilterId,callback:function(e){t.selectedItemCategoryFilterId=e},expression:"selectedItemCategoryFilterId"}})],1)])])]),i("form",{staticClass:"form-horizontal row"},[i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group "},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v(t._s(t.$t("pri.shipView.config.buildCnt")))]),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.buildCnt,expression:"buildCnt"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.buildCnt},on:{input:function(e){e.target.composing||(t.buildCnt=e.target.value)}}})])])]),i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group "},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v(t._s(t.$t("pri.shipView.config.buildCostRate")))]),i("div",{staticClass:"col-sm-8"},[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.buildCostRate,expression:"buildCostRate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.buildCostRate},on:{input:function(e){e.target.composing||(t.buildCostRate=e.target.value)}}}),i("span",{staticClass:"input-group-addon"},[t._v("%")])])])])]),i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group "},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v(t._s(t.$t("pri.shipView.config.buildTimeRate")))]),i("div",{staticClass:"col-sm-8"},[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.buildTimeRate,expression:"buildTimeRate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.buildTimeRate},on:{input:function(e){e.target.composing||(t.buildTimeRate=e.target.value)}}}),i("span",{staticClass:"input-group-addon"},[t._v("%")])])])])]),i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group "},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v(t._s(t.$t("pri.quickInputSkill.config.lvNumber")))]),i("div",{staticClass:"col-sm-8"},[i("QuickInputSkill",{attrs:{t_id:t.$commonConst.skillQuickInputType.build},on:{"set-skill-effect":t.setSkillEffect}})],1)])])])]),i("div",{staticClass:"box-footer clearfix"},[i("form",{staticClass:"form-horizontal row"},[t._l(t.configShowDataArr,function(e,s){return i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v(t._s(t.$t("pri.shipView.config.data."+s)))]),i("div",{staticClass:"col-sm-8"},["sb_time_build"==s?i("eeSelect",{attrs:{value:t.$commonConst.timeType.sec,options:t.eeTimeSwitchList(t.itemCost[s]*t.buildCnt*t.buildTimeRate/100)}}):"i_"==s.substr(0,2)?i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.linkedItem[s])}}):"sb_isk"==s.substr(0,6)?i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.itemCost[s])}}):i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.itemCost[s]}})],1)])])}),t._m(2)],2)]),i("div",{staticClass:"box-footer clearfix"},[i("eeAccountWorkbenchSection",{attrs:{showTitle:!1,saveData:t.aw_saveData,input_aw_type_id:t.aw_awTypeId,input_aw_title:t.aw_autoTitle,input_aw_v_1:t.selectedItemId},on:{"aw-dataLoaded":t.aw_dataLoaded}})],1)]),i("TopicDisplay",{ref:"TopicDisplay"}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12"},[i("div",{staticClass:"box box-primary"},[i("div",{staticClass:"box-header"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.result.title")))]),i("eePriceSelector",{staticClass:"pull-right",attrs:{input_flag_showDetailPrice:t.eePriceSelector_params.showDetailPrice,input_flag_showSumPrice:t.eePriceSelector_params.showSumPrice,input_flag_selectedPriceType:t.eePriceSelector_params.selectedPriceType,input_flag_stopPriceUpdate:t.awFlag.loadingAW},on:{"price-type-changed":t.eePriceSelector_priceTypeChanged,"switch-flag":function(e){var i=arguments.length,s=Array(i);while(i--)s[i]=arguments[i];return t.eeSwitchObjFlag.apply(void 0,[t.eePriceSelector_params].concat(s))}}})],1),i("div",{staticClass:"box-body table-responsive no-padding"},[i("table",{staticClass:"table table-hover table-striped"},[i("tbody",[i("tr",[i("th",[i("span",{staticClass:"fa fa-eye text-green ee-pointer",on:{click:function(e){return t.recoverResultMaterialShowControl()}}}),t._v("   "+t._s(t.$t("pri.shipView.result.table.title.item"))+" ("+t._s(t.displayMaterialResultShowStatus())+")")]),i("th",[t._v(t._s(t.$t("pri.shipView.result.table.title.inhand")))]),i("th",[t._v(t._s(t.$t("pri.shipView.result.table.title.buildCost")))]),i("th",[t._v(t._s(t.$t("pri.shipView.result.table.title.stillNeed")))]),i("th",[t._v(t._s(t.$t("pri.shipView.result.table.title.percent")))])]),t._l(t.inhandObj,function(e,s){return i("tr",{directives:[{name:"show",rawName:"v-show",value:t.itemCostCalculate[s]>0&&t.resultMaterialShowControl[s]["isShow"],expression:"itemCostCalculate[index] > 0 && resultMaterialShowControl[index]['isShow']"}]},[i("td",[i("span",{staticClass:"fa fa-eye-slash text-red  ee-pointer",on:{click:function(e){return t.swtichResultMaterialShowControl(s,!1)}}}),t._v("   "),i("span",{staticClass:"btn btn-xs",class:"m"==s.substr(0,1)?"btn-primary":"btn-success",staticStyle:{"margin-bottom":"13px"}},[t._v(" "+t._s(t.$t("material."+s)))]),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"},{name:"model",rawName:"v-model",value:t.priceList[s],expression:"priceList[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.priceList[s]},on:{input:function(e){e.target.composing||t.$set(t.priceList,s,e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inhandObj[s],expression:"inhandObj[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.inhandObj[s]},on:{input:function(e){e.target.composing||t.$set(t.inhandObj,s,e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.priceList[s]*t.runEval(t.inhandObj[s]))}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.itemCostCalculate[s],expression:"itemCostCalculate[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.itemCostCalculate[s]},on:{input:function(e){e.target.composing||t.$set(t.itemCostCalculate,s,e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.priceList[s]*t.itemCostCalculate[s])}})]),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.itemCostCalculate[s]-t.runEval(t.inhandObj[s]))}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber((t.itemCostCalculate[s]-t.runEval(t.inhandObj[s]))*t.priceList[s])}})]),i("td",[i("span",[t._v(t._s(t.showFloor(t.runEval(t.inhandObj[s])/t.itemCostCalculate[s]*100))+"%")]),i("div",{staticClass:"progress progress-xs progress-striped active"},[i("div",{staticClass:"progress-bar ",class:{"progress-bar-success":t.runEval(t.inhandObj[s])/t.itemCostCalculate[s]>=.99,"progress-bar-danger":t.runEval(t.inhandObj[s])/t.itemCostCalculate[s]<=.45,"progress-bar-yellow":t.runEval(t.inhandObj[s])/t.itemCostCalculate[s]>.45&&t.runEval(t.inhandObj[s])/t.itemCostCalculate[s]<.99},style:"width: "+t.showFloor(t.runEval(t.inhandObj[s])/t.itemCostCalculate[s]*100)+"%"})])])])}),i("tr",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showSumPrice,expression:"eePriceSelector_params.showSumPrice"}]},[i("td",[i("span",{staticClass:"btn btn-info btn-sm",staticStyle:{"margin-bottom":"13px"}},[t._v(t._s(t.$t("pri.shipView.result.table.title.sum")))])]),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.table_sum_target)}})]),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.table_sum_build)}})]),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.table_sum_left)}})]),i("td")])],2)])])])])]),i("div",{staticClass:"box"},[i("div",{staticClass:"box-header"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.oreConfig.title")))]),t._m(3)]),i("div",{staticClass:"box-body"},[i("h4",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.oreConfig.title_rate"))+" "),i("small",[t._v(" "+t._s(t.$t("pri.shipView.oreConfig.title_rate_small")))])]),i("hr"),i("div",{staticClass:"row"},[i("form",{staticClass:"form-horizontal"},t._l(t.oreRate,function(e,s){return i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v(t._s(t.$t("ore."+s)))]),i("div",{staticClass:"col-sm-8"},[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.oreRate[s],expression:"oreRate[k]",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.oreRate[s]},on:{input:function(e){e.target.composing||t.$set(t.oreRate,s,t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"input-group-addon"},[t._v("%")])])])])])}),0)]),i("h4",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.oreConfig.title_oreOpen"))+" "),i("small",[t._v(t._s(t.$t("pri.shipView.oreConfig.title_oreOpen_small")))])]),i("hr"),i("div",{staticClass:"row"},[i("form",{staticClass:"form-horizontal"},[i("div",{staticClass:"col-sm-12"},t._l(t.oreArr,function(e){return i("div",{staticClass:"col-sm-1"},[i("button",{staticClass:"btn btn-block btn-sm",class:e.oc_isMining?"btn-info":"btn-default",attrs:{type:"button"},on:{click:function(i){return t.eeSwitchObjFlag(e,"oc_isMining")}}},[t._v(t._s(t.$t("ore."+e.o_code)))]),i("div",{staticClass:"form-group"})])}),0)])])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12"},[i("div",{staticClass:"box box-primary"},[i("div",{staticClass:"box-header"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.shipView.oreResult.title"))+" "),i("small",[t._v(" "+t._s(t.$t("pri.shipView.oreResult.title_small")))])]),i("eePriceSelector",{staticClass:"pull-right",attrs:{input_flag_showDetailPrice:t.eePriceSelector_params2.showDetailPrice,input_flag_showSumPrice:t.eePriceSelector_params2.showSumPrice,input_show_btnSum:!1,input_flag_selectedPriceType:t.eePriceSelector_params2.selectedPriceType,input_flag_stopPriceUpdate:t.awFlag.loadingAW},on:{"price-type-changed":function(e){var i=arguments.length,s=Array(i);while(i--)s[i]=arguments[i];return t.eePriceSelector_priceTypeChanged.apply(void 0,s.concat([2]))},"switch-flag":function(e){var i=arguments.length,s=Array(i);while(i--)s[i]=arguments[i];return t.eeSwitchObjFlag.apply(void 0,[t.eePriceSelector_params2].concat(s))}}})],1),i("div",{staticClass:"box-body table-responsive no-padding"},[i("table",{staticClass:"table table-hover table-striped"},[i("tbody",[i("tr",[i("th",[i("span",{staticClass:"fa fa-eye text-green ee-pointer",on:{click:function(e){return t.recoverResultOreMaterialShowControl()}}}),t._v("    \n                    "+t._s(t.$t("pri.shipView.oreResult.table.title.item"))+"\n                    ("+t._s(t.displayOreMaterialResultShowStatus())+")\n                  ")]),i("th",[t._v(t._s(t.$t("pri.shipView.oreResult.table.title.stillNeed")))]),i("th",[t._v(t._s(t.$t("pri.shipView.oreResult.table.title.oreSuggest")))])]),t._l(t.inhandObj,function(e,s){return i("tr",{directives:[{name:"show",rawName:"v-show",value:t.itemCostCalculate[s]>0&&"m"==s.substr(0,1)&&t.itemCostCalculate[s]-t.runEval(t.inhandObj[s])>=1&&t.resultOreMaterialShowControl[s]["isShow"],expression:"itemCostCalculate[index] > 0 && index.substr(0,1) == 'm' && itemCostCalculate[index]-runEval(inhandObj[index]) >= 1 && resultOreMaterialShowControl[index]['isShow']"}]},[i("td",[i("span",{staticClass:"fa fa-eye-slash text-red  ee-pointer",on:{click:function(e){return t.swtichResultOreMaterialShowControl(s,!1)}}}),t._v("\n                       \n                    "),i("span",{staticClass:"fa fa-eye ee-pointer",class:1==t.flag_resourceShow[s]?"text-green":"",on:{click:function(e){return t.showSource(s)}}}),t._v("\n                     \n                    "),i("span",{staticClass:"btn btn-xs",class:"m"==s.substr(0,1)?"btn-primary":"btn-success",staticStyle:{"margin-bottom":"13px"}},[t._v(t._s(t.$t("material."+s)))]),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params2.showDetailPrice,expression:"eePriceSelector_params2.showDetailPrice"},{name:"model",rawName:"v-model",value:t.priceList2[s],expression:"priceList2[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.priceList2[s]},on:{input:function(e){e.target.composing||t.$set(t.priceList2,s,e.target.value)}}})]),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber(t.itemCostCalculate[s]-t.runEval(t.inhandObj[s]))}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params2.showDetailPrice,expression:"eePriceSelector_params2.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.eeFormatNumber((t.itemCostCalculate[s]-t.runEval(t.inhandObj[s]))*t.priceList2[s])}})]),i("td",t._l(t.oreArr,function(e,a){return e["o_"+s]>0?i("p",{directives:[{name:"show",rawName:"v-show",value:1==e.oc_isMining||1==t.resourceShowMapping[s][e.o_code],expression:"oneOre.oc_isMining == 1 || resourceShowMapping[index][oneOre.o_code] == 1 "}],staticClass:"ee-pointer",class:e.oc_color},[i("span",{staticClass:"fa fa-plus text-green",on:{click:function(i){t.addNewMixOreItem(s,e,t.itemCostCalculate[s]-t.runEval(t.inhandObj[s]))}}}),t._v("\n                       \n                      "),i("span",{staticClass:"fa fa-eye-slash text-red",on:{click:function(i){return t.switchResourceShowMapping(s,e.o_code)}}}),i("span",{domProps:{innerHTML:t._s(t.ore_cal(s,e,t.itemCostCalculate[s]-t.runEval(t.inhandObj[s])))},on:{click:function(i){return t.ore_focus(e)},dblclick:function(i){return t.ore_removeCal(e)}}})]):t._e()}),0)])})],2)])])])]),i("OreMix",{ref:"OreMix",attrs:{inputShowStartOre:t.oreMix_showStartOre,inputNewOre:t.oreMix_newOre,inputNeedObj:t.data_stillNeedMineral,inputOreRate:t.oreRate}})],1)],1)]),i("Pri_FooterBar")],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-tools pull-right"},[i("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[i("i",{staticClass:"fa fa-minus"})]),i("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[i("i",{staticClass:"fa fa-times"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-tools pull-right"},[i("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[i("i",{staticClass:"fa fa-minus"})]),i("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[i("i",{staticClass:"fa fa-times"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-sm-3 hide"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input_ship_id"}},[t._v("123")]),i("div",{staticClass:"col-sm-8"},[i("div",{staticClass:"input-group "},[i("input",{staticClass:"form-control",attrs:{type:"text"}}),i("div",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-warning dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-expanded":"false"}},[t._v("Action\n                        "),i("span",{staticClass:"fa fa-caret-down"})]),i("ul",{staticClass:"dropdown-menu"},[i("li",[i("a",{attrs:{href:"#"}},[t._v("Action")])]),i("li",[i("a",{attrs:{href:"#"}},[t._v("Another action")])]),i("li",[i("a",{attrs:{href:"#"}},[t._v("Something else here")])]),i("li",{staticClass:"divider"}),i("li",[i("a",{attrs:{href:"#"}},[t._v("Separated link")])])])])])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-tools pull-right"},[i("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[i("i",{staticClass:"fa fa-minus"})]),i("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[i("i",{staticClass:"fa fa-times"})])])}],r=(i("7f7f"),i("ac6a"),i("96cf"),i("3b8d")),o=i("f499"),l=i.n(o),n=(i("28a5"),i("7374")),c=i("bf26"),u=i("325e"),p=i("bcea"),d=i("6f44"),m=i("e21e"),h=i("d735"),v=i("8ec3"),b=i("686a"),f=i("3ab5"),C=i("61c1"),w=i("a97d"),x=i("37e4"),g={m_st:0,m_lj:0,m_ly:0,m_tws:0,m_cxx:0,m_sy:0,m_csk:0,m_me:0,p_gz:0,p_gc:0,p_sg:0,p_ns:0,p_jm:0,p_zs:0,p_xw:0,p_tg:0,p_dy:0,p_gh:0,p_jt:0,p_ah:0,p_hxqt:0,p_xyqt:0,p_jc:0,p_zhong:0,p_gjs:0,p_fy:0,p_yd:0,p_gyxw:0,p_cqlsl:0,p_jfxa:0,p_lqj:0,p_nsy:0,p_jzmk:0,p_nmt:0,p_gjgzc:0,p_lqdy:0,p_zhongshui:0,p_xfdlz:0,p_yhcy:0,p_lzry:0,p_twsrl:0,p_dlztt:0},y={i_isk_system:0,i_isk_market:0,sb_isk_system:0,sb_isk_market:0,sb_techLvl:0,sb_isk_build:0,sb_time_build:0},S={name:"ShipView",data:function(){return{version:"v3.5.13",flag:{isAwLoaded:!1},selectedItemTypeId:this.$commonConst.blueprintType.ship,selectedItemId:0,selectedItemTitle:"",selectedItemCategoryFilterId:0,buildCostRate:150,buildTimeRate:100,buildCnt:1,curItemTypeList:[],cacheItemTypeList:{},linkedItem:{i_isk_system:0,i_isk_market:0},inhandObj:_.cloneDeep(g),resultMaterialShowControl:{},resultOreMaterialShowControl:{},flag_resourceShow:_.cloneDeep(g),resourceShowMapping:{},itemCost:_.cloneDeep(y),itemCostCalculate:_.cloneDeep(g),resultObj:_.cloneDeep(g),configShowDataArr:_.cloneDeep(y),oreArr:[],oreRate:{o_fjs:30,o_sps:30,o_hy:30,o_twyk:30,o_sdts:30},oreRateMapping:{o_fjs:"o_fjs",o_zsy:"o_fjs",o_gjy:"o_sps",o_xcy:"o_fjs",o_obes:"o_sps",o_sps:"o_sps",o_jsbk:"o_twyk",o_xmft:"o_hy",o_twyk:"o_twyk",o_hy:"o_hy",o_hzs:"o_sps",o_pmy:"o_hy",o_kljs:"o_twyk",o_sdts:"o_sdts",o_akly:"o_sdts",o_jfdy:"o_sdts"},oreMix_newOre:{o_id:0,o_code:"",o_cnt:0}}},computed:{select2_YesOrNo:function(){var t=[];for(var e in this.$commonConst.YesorNo){var i=this.$commonConst.YesorNo[e];t.push({id:i.id,text:this.$t(i.text)})}return t},select2_itemList:function(){var t=[];for(var e in this.curItemTypeList){var i=this.curItemTypeList[e];if(!(this.selectedItemCategoryFilterId>0&&i.sb_itemCategory_id!=this.selectedItemCategoryFilterId)){var s=i.sb_techLvl+"-"+i.sb_titleEn;"zh"==this.$i18n.locale&&(s=i.sb_title),s=this.getTechLvl(i.sb_techLvl)+" - "+s,1==i.sb_isOmega&&(s+=' <span class="text text-yellow">Ω</span>'),t.push({id:i.sb_id,text:s})}}return t},select2_itemCategoryFilterArr:function(){var t=[];if(this.selectedItemTypeId==this.$commonConst.blueprintType.drone)for(var e in this.$commonConst.slotTypes_drone){var i=this.$commonConst.slotTypes_drone[e];for(var s in this.$commonConst.slotTypes_drone[e]["subTypes"]){var a=this.$commonConst.slotTypes_drone[e]["subTypes"][s];t.push({id:a.id,text:this.$t(i.text)+" - "+this.$t(a.text)})}}else{var r=[];for(var o in this.selectedItemTypeId==this.$commonConst.blueprintType.ship&&(r=this.$commonConst.shipCategory),this.selectedItemTypeId==this.$commonConst.blueprintType.equipment&&(r=this.$commonConst.sbCategoryEquipment),r){var l=r[o];t.push({id:l.id,text:this.$t(l.text)})}}return t},table_sum_target:function(){var t=0;for(var e in this.inhandObj)this.resultMaterialShowControl[e]["isShow"]&&(t+=this.runEval(this.inhandObj[e])*this.priceList[e]);return _.floor(t,2)},table_sum_build:function(){var t=0;for(var e in this.itemCostCalculate)this.resultMaterialShowControl[e]["isShow"]&&(t+=this.itemCostCalculate[e]*this.priceList[e]);return _.floor(t,2)},table_sum_left:function(){var t=0;for(var e in this.itemCostCalculate)this.resultMaterialShowControl[e]["isShow"]&&this.itemCostCalculate[e]>this.runEval(this.inhandObj[e])&&(t+=(this.itemCostCalculate[e]-this.runEval(this.inhandObj[e]))*this.priceList[e]);return _.floor(t,2)},data_stillNeedMineral:function(){var t={};for(var e in this.inhandObj)this.itemCostCalculate[e]>0&&"m"==e.substr(0,1)&&this.itemCostCalculate[e]-this.runEval(this.inhandObj[e])>=1&&(t[e]=_.floor(this.itemCostCalculate[e]-this.runEval(this.inhandObj[e])));return t},aw_autoTitle:function(){var t="";if(!this.selectedItemTitle)return t;var e=this.selectedItemTitle.split("<");return t+=e[0]+"- "+this.buildCostRate+"%",t},aw_saveData:function(){var t={selectedItemTypeId:this.selectedItemTypeId,selectedItemId:this.selectedItemId,buildCnt:this.buildCnt,buildCostRate:this.buildCostRate,buildTimeRate:this.buildTimeRate,itemCostCalculate:this.itemCostCalculate,showItemPrice:this.showItemPrice,showSumPrice:this.showSumPrice,resourceShowMapping:this.resourceShowMapping,resultMaterialShowControl:this.resultMaterialShowControl,priceList:this.priceList,eePriceSelector_params:this.eePriceSelector_params,priceList2:this.priceList2,eePriceSelector_params2:this.eePriceSelector_params2,inhandObj:this.inhandObj,oreRate:this.oreRate,oreArr:this.oreArr,mixOreArr:[],mixOreAdd:{}};return void 0!=this.$refs.OreMix&&(t.mixOreArr=this.$refs.OreMix.mixOreArr,t.mixOreAdd.priceList=this.$refs.OreMix.priceList,t.mixOreAdd.eePriceSelector_params=this.$refs.OreMix.eePriceSelector_params),l()(t)},aw_awTypeId:function(){var t=0,e={};return e[this.$commonConst.blueprintType.ship]=this.$commonConst.calculatorType["build-ship"],e[this.$commonConst.blueprintType.equipment]=this.$commonConst.calculatorType["build-equipment"],e[this.$commonConst.blueprintType.drone]=this.$commonConst.calculatorType["build-drone"],e[this.$commonConst.blueprintType.building]=this.$commonConst.calculatorType["build-building"],void 0!=e[this.selectedItemTypeId]&&(t=e[this.selectedItemTypeId]),t},oreMix_showStartOre:function(){var t=!0;return this.$route.params.aw_id&&(t=!1),t}},watch:{itemCost:{handler:function(t,e){this.itemCostCalculator()},deep:!0},buildCnt:{handler:function(t,e){this.flag.isAwLoaded||this.itemCostCalculator()},deep:!0},buildCostRate:{handler:function(t,e){this.flag.isAwLoaded||this.itemCostCalculator()},deep:!0},oreRate:{handler:function(t,e){for(var i in this.oreArr){var s=this.oreArr[i];this.oreArr[i].oc_rate=this.oreRate[this.oreRateMapping[s.o_code]]}},deep:!0}},methods:{wrapData:function(t){var e=t;return e},loadShipBlueprintList:function(){var t=this;if(void 0!=this.cacheItemTypeList[this.selectedItemTypeId])return this.curItemTypeList=this.cacheItemTypeList[this.selectedItemTypeId],!1;var e=this,i="v1/sb-types/"+this.selectedItemTypeId+"/ship-blueprints";this.$axios.get(i).then(function(i){e.curItemTypeList=i.data,t.cacheItemTypeList[t.selectedItemTypeId]=i.data}).catch(function(t){})},loadShipBlueprintDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,i){var s,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this,this.selectedItemTitle=i,this.emptyCostCalculate(),0!=this.selectedItemId&&null!=this.selectedItemId){t.next=5;break}return t.abrupt("return");case 5:return s="v1/ship-blueprints/"+this.selectedItemId,this.selectedItemTypeId==this.$commonConst.blueprintType.ship&&(s+="?embed=sbShip:s_id,s_isk_market,s_isk_system"),this.selectedItemTypeId!=this.$commonConst.blueprintType.equipment&&this.selectedItemTypeId!=this.$commonConst.blueprintType.building||(s+="?embed=sbEquipment:e_id,e_isk_market,e_isk_system"),this.selectedItemTypeId==this.$commonConst.blueprintType.drone&&(s+="?embed=sbDrone:d_id,d_isk_market,d_isk_system"),t.next=11,this.$axios.get(s).then(function(t){a.itemCost=t.data,void 0!=t.data.sbShip&&(a.linkedItem=t.data.sbShip,a.linkedItem.i_isk_market=t.data.sbShip.s_isk_market,a.linkedItem.i_isk_system=t.data.sbShip.s_isk_system),void 0!=t.data.sbEquipment&&(a.linkedItem=t.data.sbEquipment,a.linkedItem.i_isk_market=t.data.sbEquipment.e_isk_market,a.linkedItem.i_isk_system=t.data.sbEquipment.e_isk_system),void 0!=t.data.sbDrone&&(a.linkedItem=t.data.sbDrone,a.linkedItem.i_isk_market=t.data.sbDrone.d_isk_market,a.linkedItem.i_isk_system=t.data.sbDrone.d_isk_system),a.flag.isAwLoaded||(a.eePriceSelector_params.showSumPrice=!0)}).catch(function(t){});case 11:this.$refs.TopicDisplay.generateDisplayTopic();case 12:case"end":return t.stop()}},t,this)}));function e(e,i){return t.apply(this,arguments)}return e}(),itemCostCalculator:function(){if(this.flag.isAwLoaded&&(this.flag.isAwLoaded=!1,this.itemCostCalculate.m_st>0))return!1;for(var t in g)this.itemCost["sb_"+t]>0&&(this.itemCostCalculate[t]=_.ceil(this.itemCost["sb_"+t]*this.buildCostRate/100)*this.buildCnt)},emptyCostCalculate:function(){if(this.flag.isAwLoaded)return!1;for(var t in this.itemCostCalculate)this.itemCostCalculate[t]=0;this.$refs.OreMix.emptyMixOreList()},loadOreFullList:function(t){var e=this,i=this,s="v1/ores/full";this.$axios.get(s).then(function(t){if(i.oreArr.length<=0){var s=[];for(var a in t.data){var r=t.data[a];r.oc_isMining=0,r.oc_rate=30,r.oc_color="text",s.push(r)}i.oreArr=s}e.formatResourceShowMapping()}).catch(function(t){})},ore_cal:function(t,e,i){var s=0,a=0,r=0,o="";return s=i/(e["o_"+t]*(e.oc_rate/100))*100,a=s*e.o_volumn,r=s*e.o_isk_market,o=e.o_titleEn,"zh"==this.$i18n.locale&&(o=e.o_title),this.eeFormatNumber(a,2)+"m<sup>3</sup> / "+o+"x"+this.eeFormatNumber(s,2)+" / ISK:"+this.eeFormatNumber(r,2)},ore_removeCal:function(t){t.oc_isMining=0,t.oc_color="text"},ore_focus:function(t){var e=["text-red","text-yellow","text-aqua","text-blue","text-muted","text-light-blue","text-green","text-gray","text-navy","text-teal","text-olive","text-lime","text-orange","text-fuchsia","text-purple","text-maroon"];if("text"!==t.oc_color)t.oc_color="text";else{var i=_.random(0,e.length-1);t.oc_color=e[i]}},showSource:function(t){1==this.flag_resourceShow[t]?this.flag_resourceShow[t]=0:this.flag_resourceShow[t]=1,this.setResourceShowMapping(t,this.flag_resourceShow[t])},formatResourceShowMapping:function(){var t={};for(var e in this.oreArr)t[this.oreArr[e]["o_code"]]=0;var i={};for(var s in g)"m_"==s.substr(0,2)&&(i[s]=_.cloneDeep(t));this.resourceShowMapping=_.cloneDeep(i)},setResourceShowMapping:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=[];if(void 0==t)for(var s in this.resourceShowMapping)i.push(s);else i.push(t);for(var a in i)for(var r in this.resourceShowMapping[i[a]])this.resourceShowMapping[i[a]][r]=e},switchResourceShowMapping:function(t,e){this.resourceShowMapping[t][e]=(this.resourceShowMapping[t][e]+1)%2},switchItemType:function(t){this.selectedItemTypeId=t,this.selectedItemCategoryFilterId=0,this.loadShipBlueprintList()},initResultMaterialShowControl:function(){for(var t in g)this.$set(this.resultMaterialShowControl,t,{isShow:!0})},recoverResultMaterialShowControl:function(){for(var t in g)this.resultMaterialShowControl[t]["isShow"]=!0},swtichResultMaterialShowControl:function(t,e){this.resultMaterialShowControl[t]["isShow"]=e},displayMaterialResultShowStatus:function(){var t=0,e=0;for(var i in this.inhandObj)this.itemCostCalculate[i]>0&&(e++,this.resultMaterialShowControl[i]["isShow"]&&t++);return t+"/"+e},initResultOreMaterialShowControl:function(){for(var t in g)this.$set(this.resultOreMaterialShowControl,t,{isShow:!0})},recoverResultOreMaterialShowControl:function(){for(var t in g)this.resultOreMaterialShowControl[t]["isShow"]=!0},swtichResultOreMaterialShowControl:function(t,e){this.resultOreMaterialShowControl[t]["isShow"]=e},displayOreMaterialResultShowStatus:function(){var t=0,e=0;for(var i in this.inhandObj)"m_"==i.substr(0,2)&&this.itemCostCalculate[i]>0&&(e++,this.resultOreMaterialShowControl[i]["isShow"]&&t++);return t+"/"+e},addNewMixOreItem:function(t,e,i){var s=_.floor(i/(e["o_"+t]*(e.oc_rate/100))*100);this.oreMix_newOre.o_id=e.o_id,this.oreMix_newOre.o_code=e.o_code,this.oreMix_newOre.o_cnt=s},setSkillEffect:function(t){this.buildCostRate=150-t.costRate,this.buildTimeRate=100-t.timeRate},aw_dataLoaded:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var i,s,a,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=this,s=JSON.parse(e.aw_data),this.flag.isAwLoaded=!0,t.t0=regeneratorRuntime.keys(s);case 4:if((t.t1=t.t0()).done){t.next=12;break}if(a=t.t1.value,"mixOre"!=a.substr(0,6)){t.next=8;break}return t.abrupt("continue",4);case 8:r=s[a],void 0!=i[a]&&(i[a]=r),t.next=4;break;case 12:if(this.loadShipBlueprintList(),this.loadShipBlueprintDetail(),void 0!=s.mixOreArr)for(o=0;o<s.mixOreArr.length;o++)this.$refs.OreMix.importMixOre(s.mixOreArr[o]);return void 0!=s.mixOreAdd&&(this.$refs.OreMix.priceList=s.mixOreAdd.priceList,this.$refs.OreMix.eePriceSelector_params=s.mixOreAdd.eePriceSelector_params),t.next=18,this.$nextTick();case 18:this.awFlag.loadingAW=!1,this.$refs.OreMix.awFlag.loadingAW=!1;case 20:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mixins:[x["a"],C["a"]],components:{Pri_TopBar:n["a"],Pri_SideBar:c["a"],Pri_FooterBar:u["a"],Pri_RightBar:p["a"],eeSelect:m["a"],Select2:d["a"],TopicDisplay:h["a"],QuickInputSkill:v["a"],OreMix:b["a"],eeAccountWorkbenchSection:f["a"],eePriceSelector:w["a"]},created:function(){this.initResultMaterialShowControl(),this.initResultOreMaterialShowControl()},mounted:function(){this.loadOreFullList(),void 0==this.$route.params.aw_id?("build-equipment"==this.$route.name&&(this.selectedItemTypeId=this.$commonConst.blueprintType.equipment),"build-drone"==this.$route.name&&(this.selectedItemTypeId=this.$commonConst.blueprintType.drone),"build-building"==this.$route.name&&(this.selectedItemTypeId=this.$commonConst.blueprintType.building),this.loadShipBlueprintList()):(this.awFlag.loadingAW=!0,this.$refs.OreMix.awFlag.loadingAW=!0)},destroyed:function(){},beforeMount:function(){document.body.className="hold-transition skin-red sidebar-mini sidebar-collapse"}},O=S,P=i("2877"),I=Object(P["a"])(O,s,a,!1,null,null,null);e["default"]=I.exports},"686a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-xs-12"},[i("div",{staticClass:"box box-primary"},[i("div",{staticClass:"box-header"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.$t("pri.oreMixView.result.title")))]),i("eePriceSelector",{staticClass:"pull-right",attrs:{input_flag_showDetailPrice:t.eePriceSelector_params.showDetailPrice,input_flag_showSumPrice:t.eePriceSelector_params.showSumPrice,input_flag_selectedPriceType:t.eePriceSelector_params.selectedPriceType,input_flag_stopPriceUpdate:t.awFlag.loadingAW},on:{"price-type-changed":t.eePriceSelector_priceTypeChanged,"switch-flag":function(e){var i=arguments.length,s=Array(i);while(i--)s[i]=arguments[i];return t.eeSwitchObjFlag.apply(void 0,[t.eePriceSelector_params].concat(s))}},scopedSlots:t._u([{key:"preOptionSection",fn:function(){return[i("span",{staticClass:"btn btn-danger  ",staticStyle:{"margin-right":"5px"},on:{click:t.emptyMixOreList}},[i("span",{staticClass:"fa  fa-refresh"})]),i("span",{staticClass:"btn btn-success",staticStyle:{"margin-right":"5px"},on:{click:t.addNewMixOre}},[t._v(t._s(t.$t("pri.oreMixView.result.table.option.addNewOre")))]),t._v("\n           ||   \n        ")]},proxy:!0}])})],1),i("div",{staticClass:"box-body table-responsive no-padding"},[i("table",{staticClass:"table table-hover table-striped"},[i("tbody",[i("tr",[i("th",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.item")))]),i("th",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.target")))]),t._l(t.mixOreArr,function(e,s){return i("th",[t._v("\n            "+t._s(t.$t("pri.oreMixView.result.table.title.buildResult"))+" "+t._s(s)+" \n            "),i("i",{staticClass:"fa fa-times text-red ee-pointer",on:{click:function(e){return t.removeMixOre(s)}}}),i("Select2",{attrs:{options:t.select2_oreArr},on:{change:function(i){return t.loadOreDetail(e)}},model:{value:e.one_selectedOreId,callback:function(i){t.$set(e,"one_selectedOreId",i)},expression:"lOneMixOre.one_selectedOreId"}})],1)}),i("th",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.left")))]),i("th",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.percent")))])],2),i("tr",[i("td",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.cnt")))]),i("td"),t._l(t.mixOreArr,function(e,s){return i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.one_buildCnt,expression:"lOneMixOre.one_buildCnt"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.one_buildCnt},on:{input:function(i){i.target.composing||t.$set(e,"one_buildCnt",i.target.value)}}})])}),i("td"),i("td")],2),i("tr",[i("td",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.rate")))]),i("td"),t._l(t.mixOreArr,function(e,s){return i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.one_buildRate,expression:"lOneMixOre.one_buildRate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.one_buildRate},on:{input:function(i){i.target.composing||t.$set(e,"one_buildRate",i.target.value)}}})])}),i("td"),i("td")],2),i("tr",[i("td",[t._v(t._s(t.$t("pri.oreMixView.result.table.title.volume")))]),i("td"),t._l(t.mixOreArr,function(e,s){return i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.oneCalculateVolume(e)}})])}),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.calVolume()}})]),i("td")],2),t._l(t.resultItemArr,function(e,s){return i("tr",{directives:[{name:"show",rawName:"v-show",value:t.oneAllCalculateBuildCnt(s)>0,expression:"oneAllCalculateBuildCnt(index) > 0"}]},[i("td",[i("span",{staticClass:"btn btn-primary btn-xs",staticStyle:{"margin-bottom":"13px"}},[t._v(t._s(t.$t("material."+s)))]),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"},{name:"model",rawName:"v-model",value:t.priceList[s],expression:"priceList[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.priceList[s]},on:{input:function(e){e.target.composing||t.$set(t.priceList,s,e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.wantObj[s],expression:"wantObj[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.wantObj[s]},on:{input:function(e){e.target.composing||t.$set(t.wantObj,s,e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.priceList[s]*t.runEval(t.wantObj[s])}})]),t._l(t.mixOreArr,function(e){return i("td",[i("input",{staticClass:"form-control",class:{"text-blue":e.one_oreData["o_"+s]>0},attrs:{type:"text"},domProps:{value:t.oneCalculateBuildCnt(s,e)}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.showFloor(t.priceList[s]*t.oneCalculateBuildCnt(s,e))}})])}),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.oneCalculateLeft(s)}}),i("input",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showDetailPrice,expression:"eePriceSelector_params.showDetailPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.showFloor(t.oneCalculateLeft(s)*t.priceList[s])}})]),i("td",[i("span",[t._v(t._s(t.oneCalculateLeftRate(s))+"%")]),i("div",{staticClass:"progress progress-xs progress-striped active"},[i("div",{staticClass:"progress-bar ",class:t.oneCalculateLeftRate(s)>40?"progress-bar-danger":"progress-bar-success",style:"width: "+100*t.eeCal_rate(t.runEval(t.wantObj[s]),t.oneAllCalculateBuildCnt(s))+"%"})])])],2)}),i("tr",{directives:[{name:"show",rawName:"v-show",value:t.eePriceSelector_params.showSumPrice,expression:"eePriceSelector_params.showSumPrice"}]},[i("td",[i("span",{staticClass:"btn btn-info btn-sm",staticStyle:{"margin-bottom":"13px"}},[t._v(t._s(t.$t("pri.oreMixView.result.table.title.sum")))])]),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.table_sum_target}})]),t._l(t.mixOreArr,function(e,s){return i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.table_sum_build(e)}})])}),i("td",[i("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.table_sum_left()}})]),i("td")],2)],2)])])])])},a=[],r=i("6f44"),o=i("a97d"),l=i("37e4"),n=i("61c1"),c={m_st:0,m_lj:0,m_ly:0,m_tws:0,m_cxx:0,m_sy:0,m_csk:0,m_me:0},u={o_m_st:0,o_m_lj:0,o_m_ly:0,o_m_tws:0,o_m_cxx:0,o_m_sy:0,o_m_csk:0,o_m_me:0},p={name:"OreMix",data:function(){return{oneMixOre:{one_selectedOreId:0,one_buildCnt:1,one_buildRate:30,one_oreData:_.clone(u)},mixOreArr:[],oreArr:{},resultItemArr:_.clone(c),wantObj:_.clone(c),hasNewOreInput:!1,oreRateMapping:{o_fjs:"o_fjs",o_zsy:"o_fjs",o_gjy:"o_sps",o_xcy:"o_fjs",o_obes:"o_sps",o_sps:"o_sps",o_jsbk:"o_twyk",o_xmft:"o_hy",o_twyk:"o_twyk",o_hy:"o_hy",o_hzs:"o_sps",o_pmy:"o_hy",o_kljs:"o_twyk",o_sdts:"o_sdts",o_akly:"o_sdts",o_jfdy:"o_sdts"}}},props:{inputOreRate:{type:Object,default:function(){}},inputNewOre:{type:Object,default:function(){}},inputNeedObj:{type:Object,default:function(){}},inputShowStartOre:{type:Boolean,default:!0}},watch:{inputNewOre:{handler:function(t,e){this.hasNewOreInput=!0,this.addNewMixOre(t.o_id,t.o_code,t.o_cnt),this.hasNewOreInput=!1},deep:!0},inputNeedObj:{handler:function(t,e){this.wantObj=this.inputNeedObj},deep:!0},inputOreRate:{handler:function(t,e){this.oreRate=this.inputOreRate},deep:!0}},computed:{select2_oreArr:function(){var t=[];if(0==this.oreArr.length)return t;for(var e in this.oreArr){var i=this.oreArr[e],s=i.o_titleEn;"zh"==this.$i18n.locale&&(s=i.o_title),t.push({id:i.o_id,text:s})}return t},table_sum_target:function(){var t=0;for(var e in this.wantObj)t+=this.runEval(this.wantObj[e])*this.priceList[e];return _.floor(t,2)}},methods:{emptyMixOreList:function(){this.mixOreArr=[],this.addNewMixOre()},addNewMixOre:function(t,e,i){var s=_.cloneDeep(this.oneMixOre);if(this.hasNewOreInput){void 0!=t&&(s.one_selectedOreId=t),void 0!=i&&(s.one_buildCnt=i),this.loadOreDetail(s);var a=this.oreRateMapping[e];void 0!=a&&void 0!=this.inputOreRate[a]&&(s.one_buildRate=this.inputOreRate[a])}this.mixOreArr.push(s),this.$emit("refreshTopic")},removeMixOre:function(t){this.mixOreArr.splice(t,1)},importMixOre:function(t){this.mixOreArr.push(t)},oneCalculateBuildCnt:function(t,e){return _.floor(e.one_oreData["o_"+t]*e.one_buildRate*e.one_buildCnt/100/100,2)},oneAllCalculateBuildCnt:function(t){var e=0;for(var i in this.mixOreArr)e+=this.oneCalculateBuildCnt(t,this.mixOreArr[i]);return e},oneCalculateLeft:function(t){var e=0;for(var i in this.mixOreArr)e+=this.oneCalculateBuildCnt(t,this.mixOreArr[i]);return _.floor(this.runEval(this.wantObj[t])-e,2)},oneCalculateLeftRate:function(t){return 0==this.runEval(this.wantObj[t])?0:_.floor(this.oneCalculateLeft(t)/this.runEval(this.wantObj[t])*100,2)},table_sum_build:function(t){var e=0;for(var i in this.resultItemArr)e+=this.oneCalculateBuildCnt(i,t)*this.priceList[i];return _.floor(e,2)},table_sum_left:function(){var t=0;for(var e in this.resultItemArr)this.oneCalculateLeft(e)<0&&(t+=this.oneCalculateLeft(e)*this.priceList[e]);return _.floor(t,2)},showFloor:function(t){return isNaN(t)||t==-1/0?0:_.floor(t,2)},wrapData:function(t){var e=t;return e},loadOreList:function(t){var e=this,i=this,s="v1/ores";this.$axios.get(s).then(function(t){var s=[];for(var a in t.data)s.push(e.wrapData(t.data[a]));i.oreArr=s}).catch(function(t){})},loadOreDetail:function(t){var e="v1/ores/"+t.one_selectedOreId;this.$axios.get(e).then(function(e){t.one_oreData=e.data}).catch(function(t){})},oneCalculateVolume:function(t){var e=0;return void 0!=t.one_oreData.o_volumn&&(e=t.one_buildCnt*t.one_oreData.o_volumn),e},calVolume:function(){var t=0;for(var e in this.mixOreArr)t+=this.oneCalculateVolume(this.mixOreArr[e]);return _.floor(t,2)}},mounted:function(){this.loadOreList(),this.inputShowStartOre&&this.addNewMixOre(),this.eePriceSelector_params.showSumPrice=!0},mixins:[l["a"],n["a"]],components:{Select2:r["a"],eePriceSelector:o["a"]}},d=p,m=i("2877"),h=Object(m["a"])(d,s,a,!1,null,"ca467cb4",null);e["a"]=h.exports}}]);