(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["corp-member-list"],{"1d22":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{idName:e.modal.form.id,titleName:e.modal.form.title,showSaveBtn:"view"!=e.modal.type,className:e.modal.form.class},on:{"save-item":e.saveData},scopedSlots:e._u([{key:"form-items",fn:function(){return[r("div",{staticStyle:{"font-size":"14px"}},[r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cm_account_id}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cm_account_id"+e.theId}},[e._v(e._s(e.$t("pri.corpMemberFormModal.modal.cm_account_id")))]),r("div",{staticClass:"col-sm-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cm_account_id,expression:"curDataObj.cm_account_id"}],staticClass:"form-control",attrs:{type:"text",id:"input_cm_account_id"+e.theId,placeholder:e.$t("pri.corpMemberFormModal.modal.cm_account_id")},domProps:{value:e.curDataObj.cm_account_id},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cm_account_id",t.target.value)}}}),r("span",{staticClass:"text-green",domProps:{innerHTML:e._s(e.$t("pri.corpMemberFormModal.modal.cm_account_id_hint"))}})])]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cm_title}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cm_title"+e.theId}},[e._v(e._s(e.$t("pri.corpMemberFormModal.modal.cm_title")))]),r("div",{staticClass:"col-sm-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cm_title,expression:"curDataObj.cm_title"}],staticClass:"form-control",attrs:{type:"text",id:"input_cm_title"+e.theId,placeholder:e.$t("pri.corpMemberFormModal.modal.cm_title")},domProps:{value:e.curDataObj.cm_title},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cm_title",t.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cm_title,expression:"errorFlag.cm_title"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberFormModal.modal.cm_title_hint"))}})])]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.selectedCorpMemberCorpLabels}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_selectedCorpMemberCorpLabels"+e.theId}},[e._v(e._s(e.$t("pri.corpMemberFormModal.modal.selectedCorpMemberCorpLabels")))]),r("div",{staticClass:"col-sm-9"},[r("Select2",{attrs:{mu:!0,id:"input_selectedCorpMemberCorpLabels"+e.theId,options:e.select2_corpLabelList},model:{value:e.curDataObj.selectedCorpMemberCorpLabels,callback:function(t){e.$set(e.curDataObj,"selectedCorpMemberCorpLabels",t)},expression:"curDataObj.selectedCorpMemberCorpLabels"}})],1)]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cm_role_id}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cm_role_id"+e.theId}},[e._v(e._s(e.$t("pri.corpMemberFormModal.modal.cm_role_id")))]),r("div",{staticClass:"col-sm-9"},[r("eeSelect",{attrs:{id:"input_cm_role_id"+e.theId,options:e.select_corpMemberRoleArr},model:{value:e.curDataObj.cm_role_id,callback:function(t){e.$set(e.curDataObj,"cm_role_id",t)},expression:"curDataObj.cm_role_id"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cm_role_id,expression:"errorFlag.cm_role_id"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberFormModal.modal.cm_role_id_hint"))}})],1)]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cm_status_id}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cm_status_id"+e.theId}},[e._v(e._s(e.$t("pri.corpMemberFormModal.modal.cm_status_id")))]),r("div",{staticClass:"col-sm-9"},[r("eeSelect",{attrs:{id:"input_cm_status_id"+e.theId,options:e.select_corpMemberStatusArr},model:{value:e.curDataObj.cm_status_id,callback:function(t){e.$set(e.curDataObj,"cm_status_id",t)},expression:"curDataObj.cm_status_id"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cm_status_id,expression:"errorFlag.cm_status_id"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberFormModal.modal.cm_status_id_hint"))}})],1)]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cm_desc}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cm_desc"+e.theId}},[e._v(e._s(e.$t("pri.corpMemberFormModal.modal.cm_desc")))]),r("div",{staticClass:"col-sm-9"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cm_desc,expression:"curDataObj.cm_desc"}],staticClass:"form-control",attrs:{id:"input_cm_desc"+e.theId,rows:"6",placeholder:e.$t("pri.corpMemberFormModal.modal.cm_desc")},domProps:{value:e.curDataObj.cm_desc},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cm_desc",t.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cm_desc,expression:"errorFlag.cm_desc"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberFormModal.modal.cm_desc_hint"))}})])])])]},proxy:!0}])})},a=[],s=r("714b"),i=r("e21e"),c=r("6f44"),l={name:"corp-member-form-modal",data:function(){return{theId:0,errorFlag:{cm_account_id:!1,cm_title:!1,cm_desc:!1,cm_role_id:!1,cm_status_id:!1},loadedCorpLabelList:[]}},props:{curDataObj:{type:[Object],required:!0},modal:{type:[Object],required:!0},intput_select2_corpLabelList:{type:[Array]},co_id:{}},computed:{select_corpMemberRoleArr:function(){var e=[];for(var t in this.$commonConst.corpRoleType){var r=this.$commonConst.corpRoleType[t];e.push({id:r,text:this.$t("corp.role.cm_role_"+r)})}return e},select_corpMemberStatusArr:function(){var e=[];for(var t in this.$commonConst.corpMemberStatus){var r=this.$commonConst.corpMemberStatus[t];e.push({id:r,text:this.$t("corp.memberStatus.cm_status_"+r)})}return e},select2_corpLabelList:function(){if(void 0!=this.intput_select2_corpLabelList)return this.intput_select2_corpLabelList;var e=[];for(var t in this.loadedCorpLabelList){var r=this.loadedCorpLabelList[t];e.push({id:r.cl_id,text:r.cl_title})}return e}},methods:{saveData:function(){var e=this;for(var t in this.errorFlag)this.errorFlag[t]=!1;var r="v1/corporations/"+this.curDataObj.cm_corporation_id+"/corp-members";""!=this.curDataObj.cm_id?(r="v1/corp-members/"+this.curDataObj.cm_id,this.$axios.patch(r,this.curDataObj).then(function(t){e.$emit("modal-saved",t.data)}).catch(function(t){for(var r in t.response.data.data)e.errorFlag[r]=!0})):this.$axios.post(r,this.curDataObj).then(function(t){e.$emit("modal-saved",t.data)}).catch(function(t){for(var r in t.response.data.data)e.errorFlag[r]=!0})},loadCorpLabelList:function(){var e=this;if(void 0!=this.intput_select2_corpLabelList)return!1;var t="v1/corporations/"+this.co_id+"/corp-labels?q=cl_type_id="+this.$commonConst.corpLabelType.member;this.$axios.get(t).then(function(t){for(var r={},o=0;o<t.data.length;o++)r[t.data[o]["cl_id"]]=t.data[o];e.loadedCorpLabelList=r}).catch(function(e){})}},mixins:[],components:{Modal:s["a"],eeSelect:i["a"],Select2:c["a"]},created:function(){this.theId=Math.floor(1e6*Math.random())},mounted:function(){this.loadCorpLabelList()},destroyed:function(){},beforeMount:function(){}},m=l,n=r("2877"),d=Object(n["a"])(m,o,a,!1,null,null,null);t["a"]=d.exports},"8f07":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("Pri_TopBar"),r("Pri_SideBar"),r("div",{staticClass:"content-wrapper"},[r("section",{staticClass:"content-header"},[r("h1",[e._v("\n        "+e._s(e.corpMemberData.cm_title)),r("small"),r("small",{staticClass:"hide"},[e._v(e._s(e.$t("pri.corpMemberDetailView.subTitle"))+" ")])]),r("ol",{staticClass:"breadcrumb"},[r("router-link",{attrs:{tag:"li",to:"/dashboard"}},[r("a",{attrs:{href:"javascript:;"}},[r("i",{staticClass:"fa fa-cogs"}),r("span",{domProps:{innerHTML:e._s(e.$t("common.title"))}})])]),r("router-link",{attrs:{tag:"li",to:"/my-corp"}},[r("a",{attrs:{href:"javascript:;"}},[r("i",{staticClass:"fa fa-sitemap"}),r("span",{domProps:{innerHTML:e._s(e.$t("pri.sidebar.myCorp"))}})])]),r("router-link",{attrs:{tag:"li",to:"/corp/"+e.corpMemberData.cm_corporation_id+"/corp-member"}},[r("a",{attrs:{href:"javascript:;"}},[r("i",{staticClass:"fa fa-sitemap"}),r("span",{domProps:{innerHTML:e._s(e.$t("pri.corpMemberListView.title"))}})])]),r("li",{staticClass:"active"},[e._v(e._s(e.corpMemberData.cm_title))])],1)]),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 eeHighFixBox"},[r("div",{staticClass:"box box-primary "},[r("div",{staticClass:"box-header"},[r("h3",{staticClass:"box-title"},[e._v(e._s(e.$t("pri.corpMemberDetailView.corpMemberInfo.title")))]),e._m(0)]),r("div",{staticClass:"box-body"},[r("dl",{staticClass:"dl-horizontal"},[e._l(["cm_id","cm_title","cm_score","cm_desc"],function(t){return[r("dt",[e._v(e._s(e.$t("pri.corpMemberDetailView.corpMemberInfo."+t)))]),r("dd",{domProps:{innerHTML:e._s(e.corpMemberData[t])}})]}),r("dt",[e._v(e._s(e.$t("pri.corpMemberDetailView.corpMemberInfo.cm_role_id")))]),r("dd",{domProps:{innerHTML:e._s(e.$t("corp.role.cm_role_"+e.corpMemberData["cm_role_id"]))}})],2)]),e._m(1)])]),r("div",{staticClass:"col-md-6 eeHighFixBox"},[r("div",{staticClass:"box box-primary "},[r("div",{staticClass:"box-header"},[r("h3",{staticClass:"box-title"},[e._v(e._s(e.$t("pri.corpMemberDetailView.kmInfo.title")))]),e._m(2)]),r("div",{staticClass:"box-body"})])]),r("div",{staticClass:"col-md-6 eeHighFixBox"},[r("div",{staticClass:"box box-primary "},[r("div",{staticClass:"box-header"},[r("h3",{staticClass:"box-title"},[e._v(e._s(e.$t("pri.corpMemberDetailView.eventLog.title")))]),e._m(3)]),r("div",{staticClass:"box-body"})])]),r("div",{staticClass:"col-md-6 eeHighFixBox"},[r("div",{staticClass:"box box-primary "},[r("div",{staticClass:"box-header"},[r("h3",{staticClass:"box-title"},[e._v(e._s(e.$t("pri.corpMemberDetailView.scoreLog.title")))]),e._m(4)]),r("div",{staticClass:"box-body"},[r("CorpMemberScoreListTable",{attrs:{co_id:e.corpMemberData.cm_corporation_id,cm_id:e.corpMemberData.cm_id}})],1),r("div",{staticClass:"box-footer"},[r("p",{domProps:{innerHTML:e._s(e.$t("pri.corpMemberScoreListTable.msg.someTypeCannotDelete"))}})])])])])])]),r("Pri_FooterBar")],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-tools pull-right"},[r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[r("i",{staticClass:"fa fa-minus"})]),r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[r("i",{staticClass:"fa fa-times"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-footer"},[r("div",{staticClass:"pull-right"}),r("br")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-tools pull-right"},[r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[r("i",{staticClass:"fa fa-minus"})]),r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[r("i",{staticClass:"fa fa-times"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-tools pull-right"},[r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[r("i",{staticClass:"fa fa-minus"})]),r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[r("i",{staticClass:"fa fa-times"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-tools pull-right"},[r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"collapse","data-toggle":"tooltip",title:"","data-original-title":"Collapse"}},[r("i",{staticClass:"fa fa-minus"})]),r("button",{staticClass:"btn btn-box-tool",attrs:{"data-widget":"remove","data-toggle":"tooltip",title:"Remove"}},[r("i",{staticClass:"fa fa-times"})])])}],s=r("7374"),i=r("bf26"),c=r("325e"),l=r("bcea"),m=r("6a79"),n={name:"CorpMemberDetailView",data:function(){return{version:"v1.0",corpMemberData:{cm_id:0,cm_title:"",cm_code:"",cm_shortDesc:"",cm_desc:"",cm_role_id:100},modalCorpApply:{type:"apply",form:{id:"ee-model-pub-co-list-apply-form",class:"",sizeClass:"",title:""}}}},computed:{},watch:{},methods:{wrapData:function(e){var t=e;return t},loadCorpMemberDetail:function(){var e=this,t="v1/corp-members/"+this.corpMemberData.cm_id;this.$axios.get(t).then(function(t){e.corpMemberData=t.data}).catch(function(e){})}},mixins:[],components:{Pri_TopBar:s["a"],Pri_SideBar:i["a"],Pri_FooterBar:c["a"],Pri_RightBar:l["a"],CorpMemberScoreListTable:m["a"]},created:function(){this.corpMemberData.cm_id=this.$route.params.cm_id},mounted:function(){this.loadCorpMemberDetail()},destroyed:function(){},beforeMount:function(){document.body.className="hold-transition skin-red sidebar-mini sidebar-collapse"}},d=n,p=r("2877"),b=Object(p["a"])(d,o,a,!1,null,null,null);t["default"]=b.exports},f737:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("Pri_TopBar"),r("Pri_SideBar"),r("div",{staticClass:"content-wrapper"},[r("section",{staticClass:"content-header"},[r("h1",[e._v("\n        "+e._s(e.$t("pri.corpMemberListView.title"))),r("small",[e._v(e._s(e.version))]),r("small",[e._v(e._s(e.$t("pri.corpMemberListView.subTitle"))+" ")])]),r("ol",{staticClass:"breadcrumb"},[r("router-link",{attrs:{tag:"li",to:"/dashboard"}},[r("a",{attrs:{href:"javascript:;"}},[r("i",{staticClass:"fa fa-cogs"}),r("span",{domProps:{innerHTML:e._s(e.$t("common.title"))}})])]),r("router-link",{attrs:{tag:"li",to:"/my-corp"}},[r("a",{attrs:{href:"javascript:;"}},[r("i",{staticClass:"fa fa-sitemap"}),r("span",{domProps:{innerHTML:e._s(e.$t("pri.sidebar.myCorp"))}})])]),r("li",{staticClass:"active"},[e._v(e._s(e.$t("pri.corpMemberListView.title")))])],1)]),r("section",{staticClass:"content"},[r("div",{staticClass:"box box-primary"},[r("div",{staticClass:"box-header"},[r("div",[r("p",{staticClass:"text-light-blue"},[e._v(e._s(e.$t("pri.corpItemListView.msgScoreLeft",{score:e.loadedMyCorpMemberData.cm_score})))])]),r("ol",{staticClass:"content-header-btns"},[e.flag.isAdmin?[r("router-link",{class:"btn btn-success ee-columnLeft",attrs:{tag:"a",to:{name:"corp-score-log-list",params:{co_id:e.co_id}}}},[e._v(e._s(e.$t("pri.corpMemberListView.showAllScoreLog")))]),r("router-link",{class:"btn btn-primary ee-columnLeft",attrs:{tag:"a",to:{name:"corp-label-list",params:{co_id:e.co_id}}}},[e._v(e._s(e.$t("pri.corpLabelListView.title")))])]:e._e(),r("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:function(t){return e.showDailog("create")}}},[e._v(e._s(e.$t("btn.new")))])],2),r("br")]),r("div",{staticClass:"box-body"},[r("eeTable",{attrs:{columnArr:e.tableData.columns,rowArr:e.table_corpMemberListData,optionArr:e.tableData.options},scopedSlots:e._u([{key:"top-left-tool-section",fn:function(){return[e._l(e.$commonConst.corpMemberStatus,function(t,o){return r("button",{staticClass:"btn btn-sm columns-left",class:e.flag.showTypes_corpMemberStatus[t]?"btn-success":"",on:{click:function(r){return e.eeSwitchObjFlag(e.flag.showTypes_corpMemberStatus,t)}}},[e._v(e._s(e.$t("corp.memberStatus.cm_status_"+t)))])}),e._v("\n                ||\n                "),r("div",{staticClass:"form-group pull-right",staticStyle:{"min-width":"260px","line-height":"16px",margin:"0px 0px 10px 6px"}},[r("Select2",{attrs:{mu:!0,options:e.select2_corpLabelList},model:{value:e.selectedCorpLabels,callback:function(t){e.selectedCorpLabels=t},expression:"selectedCorpLabels"}})],1)]},proxy:!0},{key:"opAction",fn:function(t){return[r("router-link",{staticClass:"fa fa-eye ee-pointer ee-opBtn16",attrs:{tag:"span",title:e.$t("common.view"),to:{name:"corp-member-detail",params:{cm_id:t.oneRow.cm_id}}}}),e.flag.isAdmin?[e._v("\n                    | \n                    "),r("span",{staticClass:"fa fa-edit ee-pointer ee-opBtn16",attrs:{title:e.$t("common.update")},on:{click:function(r){return e.editCorpMember(t.oneRow,t.oneKey)}}}),e._v("\n\n                    | \n                    "),r("span",{staticClass:"fa fa-plus ee-pointer ee-opBtn16",attrs:{title:e.$t("pri.corpMemberScoreFormModal.modal.title")},on:{click:function(r){return e.adminChangeScore(t.oneRow)}}})]:e._e(),e._v("\n                  | \n                  "),r("span",{staticClass:"fa fa-exchange ee-pointer ee-opBtn16",attrs:{title:e.$t("pri.corpMemberTransferFormModal.modal.title")},on:{click:function(r){return e.corpMemberTransfer(t.oneRow)}}}),(e.flag.isAdmin,e._e())]}}])})],1)])])]),r("Pri_FooterBar"),r("CorpMemberFormModal",{attrs:{modal:this.modalCorpMember,curDataObj:this.curCorpMemberDataObj,intput_select2_corpLabelList:this.select2_corpLabelList},on:{"modal-saved":e.modalCorpMemberSaved}}),r("CorpMemberTransferFormModal",{ref:"CorpMemberTransferFormModal",attrs:{modal:this.modalCorpMemberTransfer,co_id:this.co_id,curDataObj:this.curCorpMemberTransferDataObj,loadedCorpMemberList:this.loadedCorpMemberList},on:{"modal-saved":e.modalCorpMemberTransferSaved}}),r("CorpMemberScoreFormModal",{ref:"CorpMemberScoreFormModal",attrs:{modal:this.modalCorpMemberChangeScore,co_id:this.co_id,curDataObj:this.curCorpMemberChangeScoreDataObj,loadedCorpMemberList:this.loadedCorpMemberList},on:{"modal-saved":e.modalCorpMemberChangeScoreSaved}})],1)},a=[],s=r("7374"),i=r("bf26"),c=r("325e"),l=r("bcea"),m=r("1d22"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{idName:e.modal.form.id,titleName:e.$t("pri.corpMemberTransferFormModal.modal.title"),showFooterSaveBtn:e.flag.transferStatus!==e.$commonConst.corpMemberTransferStatus.finish,className:e.modal.form.class},on:{"save-item":e.saveData},scopedSlots:e._u([{key:"form-items",fn:function(){return[r("div",{directives:[{name:"show",rawName:"v-show",value:e.flag.transferStatus!=e.$commonConst.corpMemberTransferStatus.finish,expression:"flag.transferStatus != $commonConst.corpMemberTransferStatus.finish"}]},[e.curDataObj.cmsl_type_id==e.$commonConst.corpMemberScoreLogType.admin_transfer?r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_corpMember_id}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_corpMember_id"}},[e._v(e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_corpMember_id")))]),r("div",{staticClass:"col-sm-9"},[r("Select2",{attrs:{id:"input_cmsl_corpMember_id",options:e.select2_corpMemberArr},model:{value:e.curDataObj.cmsl_corpMember_id,callback:function(t){e.$set(e.curDataObj,"cmsl_corpMember_id",t)},expression:"curDataObj.cmsl_corpMember_id"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_corpMember_id,expression:"errorFlag.cmsl_corpMember_id"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_corpMember_id_hint"))}})],1)]):e._e(),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_corpMember_id_to}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_corpMember_id_to"}},[e._v(e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_corpMember_id_to")))]),r("div",{staticClass:"col-sm-9"},[r("Select2",{attrs:{id:"input_cmsl_corpMember_id_to",options:e.select2_corpMemberArr},model:{value:e.curDataObj.cmsl_corpMember_id_to,callback:function(t){e.$set(e.curDataObj,"cmsl_corpMember_id_to",t)},expression:"curDataObj.cmsl_corpMember_id_to"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_corpMember_id_to,expression:"errorFlag.cmsl_corpMember_id_to"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_corpMember_id_to_hint"))}})],1)]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_score}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_score"}},[e._v(e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_score")))]),r("div",{staticClass:"col-sm-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cmsl_score,expression:"curDataObj.cmsl_score"}],staticClass:"form-control",attrs:{type:"text",id:"input_cmsl_score",placeholder:e.$t("pri.corpMemberTransferFormModal.modal.cmsl_score_hint")},domProps:{value:e.curDataObj.cmsl_score},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cmsl_score",t.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_score,expression:"errorFlag.cmsl_score"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_score_hint"))}})])]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_desc}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_desc"}},[e._v(e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_desc")))]),r("div",{staticClass:"col-sm-9"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cmsl_desc,expression:"curDataObj.cmsl_desc"}],staticClass:"form-control",attrs:{id:"input_cmsl_desc",rows:"6",placeholder:e.$t("pri.corpMemberTransferFormModal.modal.cmsl_desc_hint")},domProps:{value:e.curDataObj.cmsl_desc},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cmsl_desc",t.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_desc,expression:"errorFlag.cmsl_desc"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberTransferFormModal.modal.cmsl_desc_hint"))}})])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.flag.transferStatus===e.$commonConst.corpMemberTransferStatus.finish,expression:"flag.transferStatus === $commonConst.corpMemberTransferStatus.finish"}],staticClass:"text-green",domProps:{innerHTML:e._s(e.$t("pri.corpMemberTransferFormModal.modal.successMsg"))}})]},proxy:!0}])})},d=[],p=r("714b"),b=r("6f44"),u={name:"corp-member-transfer-form-modal",data:function(){return{errorFlag:{cmsl_corpMember_id:!1,cmsl_corpMember_id_to:!1,cmsl_desc:!1,cmsl_score:!1},flag:{transferStatus:this.$commonConst.corpMemberTransferStatus.notStart}}},props:{co_id:{required:!0},loadedCorpMemberList:{type:[Array],required:!0},curDataObj:{type:[Object],required:!0},modal:{type:[Object],required:!0}},computed:{select2_corpMemberArr:function(){var e=[];for(var t in this.loadedCorpMemberList){var r=this.loadedCorpMemberList[t];r.cm_status_id<this.$commonConst.corpMemberStatus.approval||e.push({id:r.cm_id,text:r.cm_title})}return e}},methods:{onEditorBlur:function(e){},onEditorFocus:function(e){},onEditorReady:function(e){},newTransferStart:function(){this.flag.transferStatus=this.$commonConst.corpMemberTransferStatus.notStart},saveData:function(){var e=this;for(var t in this.errorFlag)this.errorFlag[t]=!1;if(this.curDataObj.cmsl_type_id==this.$commonConst.corpMemberScoreLogType.transfer&&this.curDataObj.cmsl_score<=0)return this.errorFlag["cmsl_score"]=!0,!1;this.flag.transferStatus=this.$commonConst.corpMemberTransferStatus.notStart;var r="v1/corp-members/"+this.curDataObj.cmsl_corpMember_id+"/transfer";this.$axios.post(r,this.curDataObj).then(function(t){e.flag.transferStatus=e.$commonConst.corpMemberTransferStatus.finish,e.$emit("modal-saved",t.data)}).catch(function(t){for(var r in e.flag.transferStatus=e.$commonConst.corpMemberTransferStatus.fail,t.response.data.data)e.errorFlag[r]=!0})}},mixins:[],components:{Modal:p["a"],Select2:b["a"]},created:function(){},mounted:function(){},destroyed:function(){},beforeMount:function(){}},f=u,h=r("2877"),M=Object(h["a"])(f,n,d,!1,null,null,null),C=M.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{idName:e.modal.form.id,titleName:e.$t("pri.corpMemberScoreFormModal.modal.title"),showFooterSaveBtn:e.flag.transferStatus!==e.$commonConst.corpMemberScoreStatus.finish,className:e.modal.form.class},on:{"save-item":e.saveData},scopedSlots:e._u([{key:"form-items",fn:function(){return[r("div",{directives:[{name:"show",rawName:"v-show",value:e.flag.transferStatus!=e.$commonConst.corpMemberScoreStatus.finish,expression:"flag.transferStatus != $commonConst.corpMemberScoreStatus.finish"}]},[r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_corpMember_id}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_corpMember_id"}},[e._v(e._s(e.$t("pri.corpMemberScoreFormModal.modal.cmsl_corpMember_id")))]),r("div",{staticClass:"col-sm-9"},[r("Select2",{attrs:{id:"input_cmsl_corpMember_id",options:e.select2_corpMemberArr},model:{value:e.curDataObj.cmsl_corpMember_id,callback:function(t){e.$set(e.curDataObj,"cmsl_corpMember_id",t)},expression:"curDataObj.cmsl_corpMember_id"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_corpMember_id,expression:"errorFlag.cmsl_corpMember_id"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberScoreFormModal.modal.cmsl_corpMember_id_hint"))}})],1)]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_score}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_score_scoreForm"}},[e._v(e._s(e.$t("pri.corpMemberScoreFormModal.modal.cmsl_score")))]),r("div",{staticClass:"col-sm-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cmsl_score,expression:"curDataObj.cmsl_score"}],staticClass:"form-control",attrs:{type:"text",id:"input_cmsl_score_scoreForm",placeholder:e.$t("pri.corpMemberScoreFormModal.modal.cmsl_score_hint")},domProps:{value:e.curDataObj.cmsl_score},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cmsl_score",t.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_score,expression:"errorFlag.cmsl_score"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberScoreFormModal.modal.cmsl_score_hint"))}})])]),r("div",{staticClass:"form-group",class:{"has-error":e.errorFlag.cmsl_desc}},[r("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input_cmsl_desc_scoreForm"}},[e._v(e._s(e.$t("pri.corpMemberScoreFormModal.modal.cmsl_desc")))]),r("div",{staticClass:"col-sm-9"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.curDataObj.cmsl_desc,expression:"curDataObj.cmsl_desc"}],staticClass:"form-control",attrs:{id:"input_cmsl_desc_scoreForm",rows:"6",placeholder:e.$t("pri.corpMemberScoreFormModal.modal.cmsl_desc_hint")},domProps:{value:e.curDataObj.cmsl_desc},on:{input:function(t){t.target.composing||e.$set(e.curDataObj,"cmsl_desc",t.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errorFlag.cmsl_desc,expression:"errorFlag.cmsl_desc"}],staticClass:"text-red",domProps:{innerHTML:e._s(e.$t("pri.corpMemberScoreFormModal.modal.cmsl_desc_hint"))}})])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.flag.transferStatus===e.$commonConst.corpMemberScoreStatus.finish,expression:"flag.transferStatus === $commonConst.corpMemberScoreStatus.finish"}],staticClass:"text-green",domProps:{innerHTML:e._s(e.$t("pri.corpMemberScoreFormModal.modal.successMsg"))}})]},proxy:!0}])})},g=[],S={name:"corp-member-score-form-modal",data:function(){return{errorFlag:{cmsl_corpMember_id:!1,cmsl_desc:!1,cmsl_score:!1},flag:{transferStatus:this.$commonConst.corpMemberScoreStatus.notStart}}},props:{co_id:{required:!0},loadedCorpMemberList:{type:[Array],required:!0},curDataObj:{type:[Object],required:!0},modal:{type:[Object],required:!0}},computed:{select2_corpMemberArr:function(){var e=[];for(var t in this.loadedCorpMemberList){var r=this.loadedCorpMemberList[t];r.cm_status_id<this.$commonConst.corpMemberStatus.approval||e.push({id:r.cm_id,text:r.cm_title})}return e}},methods:{onEditorBlur:function(e){},onEditorFocus:function(e){},onEditorReady:function(e){},newRoundStart:function(){this.flag.transferStatus=this.$commonConst.corpMemberScoreStatus.notStart},saveData:function(){var e=this;for(var t in this.errorFlag)this.errorFlag[t]=!1;this.flag.transferStatus=this.$commonConst.corpMemberScoreStatus.notStart;var r="v1/corp-members/"+this.curDataObj.cmsl_corpMember_id+"/corp-member-score-logs";this.$axios.post(r,this.curDataObj).then(function(t){e.flag.transferStatus=e.$commonConst.corpMemberScoreStatus.finish,e.$emit("modal-saved",t.data)}).catch(function(t){for(var r in e.flag.transferStatus=e.$commonConst.corpMemberScoreStatus.fail,t.response.data.data)e.errorFlag[r]=!0})}},mixins:[],components:{Modal:p["a"],Select2:b["a"]},created:function(){},mounted:function(){},destroyed:function(){},beforeMount:function(){}},L=S,w=Object(h["a"])(L,v,g,!1,null,null,null),x=w.exports,D=r("6a38"),F={name:"CorpMemberListView",data:function(){var e=this;return{version:"v1.0",co_id:0,flag:{isAdmin:!1,showTypes_corpMemberStatus:{}},loadedMyCorpMemberData:{cm_score:0},selectedCorpLabels:[],loadedCorpMemberList:[],loadedCorpLabelList:{},tableData:{columns:[{field:"cm_id",title:function(){return e.$t("pri.corpMemberListView.table.title.cm_id")},sortable:!0},{field:"cm_title",title:function(){return e.$t("pri.corpMemberListView.table.title.cm_title")},sortable:!0},{field:"cm_score",title:function(){return e.$t("pri.corpMemberListView.table.title.cm_score")},sortable:!0},{field:"cm_role",title:function(){return e.$t("pri.corpMemberListView.table.title.cm_role")},sortable:!0},{field:"selectedCorpMemberCorpLabels_text",title:function(){return e.$t("pri.corpMemberListView.table.title.selectedCorpMemberCorpLabels")},sortable:!0},{field:"cm_creationDate",title:function(){return e.$t("pri.corpMemberListView.table.title.cm_creationDate")},sortable:!0},{field:"cm_status",title:function(){return e.$t("pri.corpMemberListView.table.title.cm_status")},sortable:!0},{type:"slot",field:"opAction",titleStyle:"min-width:90px;",title:function(){return e.$t("common.op")}}],options:{tableClass:"table table-bordered text-center table-hover table-striped",showTableFooter:!0,sortContainerSize:2,tool_allowGlobalSearch:!0,tool_showRefresh:!0,tool_showColumns:!0}},modalCorpMember:{type:"create",form:{id:"ee-model-co-member-list-create-form",class:"",sizeClass:"",title:""}},curCorpMemberDataObj:{i:"",cm_id:"",cm_corporation_id:"",cm_account_id:"",cm_title:"",cm_desc:"",cm_role_id:"",cm_status_id:"",selectedCorpMemberCorpLabels:[]},modalCorpMemberTransfer:{type:"transfer",form:{id:"ee-model-co-member-list-transfer-form",class:"",sizeClass:"",title:""}},curCorpMemberTransferDataObj:{i:"",cmsl_id:"",cmsl_type_id:"",cmsl_corpMember_id:"",cmsl_corpMember_id_to:"",cmsl_corpMember_id_from:"",cmsl_score:"",cmsl_desc:""},modalCorpMemberChangeScore:{type:"change-score",form:{id:"ee-model-co-member-list-change-score-form",class:"",sizeClass:"",title:""}},curCorpMemberChangeScoreDataObj:{i:"",cmsl_id:"",cmsl_type_id:"",cmsl_corpMember_id:"",cmsl_score:"",cmsl_desc:""}}},computed:{select2_corpLabelList:function(){var e=[];for(var t in this.loadedCorpLabelList){var r=this.loadedCorpLabelList[t];e.push({id:r.cl_id,text:r.cl_title})}return e},table_corpMemberListData:function(){var e=[],t=this.eeArrayValueAsKey(this.selectedCorpLabels);for(var r in this.loadedCorpMemberList){var o=this.loadedCorpMemberList[r];if(this.flag.showTypes_corpMemberStatus[o.cm_status_id]){if(null!=this.selectedCorpLabels&&this.selectedCorpLabels.length>0){var a=!0;for(var s in o.selectedCorpMemberCorpLabels)if(void 0!=t[o.selectedCorpMemberCorpLabels[s]]){a=!1;break}if(a)continue}var i=o;i.i=r,i["cm_role"]=this.$t("corp.role.cm_role_"+o.cm_role_id),i["cm_status"]=this.$t("corp.memberStatus.cm_status_"+o.cm_status_id);var c="";for(var s in o.selectedCorpMemberCorpLabels){var l=this.loadedCorpLabelList[o.selectedCorpMemberCorpLabels[s]];void 0!=l&&(c+='<span class="label ee-columnLeft" style="color: '+l.cl_color_text+"; background-color:"+l.cl_color_bg+';" >'+l.cl_title+"</span>")}i["selectedCorpMemberCorpLabels_text"]=c,e.push(i)}}return e}},watch:{},methods:{initShowTypes:function(){var e={};for(var t in this.$commonConst.corpMemberStatus){var r=this.$commonConst.corpMemberStatus[t];e[r]="approval"==t}this.$set(this.flag,"showTypes_corpMemberStatus",e)},wrapData:function(e){var t=e;return t},wrapTableData:function(e){var t=e;return t},loadCorpMemberList:function(){var e=this,t="v1/corporations/"+this.co_id+"/corp-members";this.$axios.get(t).then(function(t){e.loadedCorpMemberList=t.data}).catch(function(e){})},loadCorpLabelList:function(){var e=this,t="v1/corporations/"+this.co_id+"/corp-labels?q=cl_type_id="+this.$commonConst.corpLabelType.member;this.$axios.get(t).then(function(t){for(var r={},o=0;o<t.data.length;o++)r[t.data[o]["cl_id"]]=t.data[o];e.loadedCorpLabelList=r}).catch(function(e){})},loadMyCorpMemberData:function(){var e=this,t="v1/corporations/"+this.co_id+"/my-corp-member";this.$axios.get(t).then(function(t){t.data.cm_role_id<e.$commonConst.corpRoleType.fc&&(e.flag.isAdmin=!0),e.loadedMyCorpMemberData=t.data}).catch(function(e){})},showDailog:function(e,t){this.modalCorpMember.type=e,"create"==e?(this.modalCorpMember.form.title=this.$t("common.create"),this.cleanObj("curCorpMemberDataObj"),this.curCorpMemberDataObj.cm_corporation_id=this.co_id,this.curCorpMemberDataObj.cm_role_id=this.$commonConst.corpRoleType.normal,this.curCorpMemberDataObj.cm_status_id=this.$commonConst.corpMemberStatus.approval):(this.modalCorpMember.form.title=this.$t("common.update"),"view"==e&&(this.modalCorpMember.form.title=this.$t("common.view")),this.curCorpMemberDataObj=t),$("#"+this.modalCorpMember.form.id).modal()},editCorpMember:function(e,t){this.showDailog("update",_.cloneDeep(e))},modalCorpMemberSaved:function(e){var t=this;""!=this.curCorpMemberDataObj.cm_id?(e.i=t.curCorpMemberDataObj.i,t.$set(t.loadedCorpMemberList,t.curCorpMemberDataObj.i,t.wrapTableData(e))):(e.i=this.loadedCorpMemberList.length,this.loadedCorpMemberList.push(this.wrapTableData(e))),$("#"+this.modalCorpMember.form.id).modal("hide")},corpMemberTransfer:function(e){this.cleanObj("curCorpMemberTransferDataObj"),this.curCorpMemberTransferDataObj.cmsl_corpMember_id=this.loadedMyCorpMemberData.cm_id,this.curCorpMemberTransferDataObj.cmsl_corpMember_id_to=e.cm_id,this.curCorpMemberTransferDataObj.cmsl_type_id=this.$commonConst.corpMemberScoreLogType.transfer,this.flag.isAdmin&&(this.curCorpMemberTransferDataObj.cmsl_type_id=this.$commonConst.corpMemberScoreLogType.admin_transfer),this.$refs.CorpMemberTransferFormModal.newTransferStart(),$("#"+this.modalCorpMemberTransfer.form.id).modal()},modalCorpMemberTransferSaved:function(e){this.loadCorpMemberList()},adminChangeScore:function(e){this.cleanObj("curCorpMemberChangeScoreDataObj"),this.curCorpMemberChangeScoreDataObj.cmsl_corpMember_id=e.cm_id,this.curCorpMemberChangeScoreDataObj.cmsl_type_id=this.$commonConst.corpMemberScoreLogType.admin_change,this.$refs.CorpMemberScoreFormModal.newRoundStart(),$("#"+this.modalCorpMemberChangeScore.form.id).modal()},modalCorpMemberChangeScoreSaved:function(e){this.loadCorpMemberList()}},mixins:[],components:{Pri_TopBar:s["a"],Pri_SideBar:i["a"],Pri_FooterBar:c["a"],Pri_RightBar:l["a"],eeTable:D["a"],Select2:b["a"],CorpMemberFormModal:m["a"],CorpMemberTransferFormModal:C,CorpMemberScoreFormModal:x},created:function(){this.co_id=this.$route.params.co_id,void 0!=this.$route.params.cl_id&&(this.selectedCorpLabels=[this.$route.params.cl_id])},mounted:function(){this.initShowTypes(),this.loadCorpLabelList(),this.loadCorpMemberList(),this.loadMyCorpMemberData()},destroyed:function(){},beforeMount:function(){document.body.className="hold-transition skin-red sidebar-mini sidebar-collapse"}},j=F,y=Object(h["a"])(j,o,a,!1,null,null,null);t["default"]=y.exports}}]);